//*****************************************************************************
//*  CALIBRE DRC COMMAND FILE - CN65_WIRE_BOND_7M_4X2Z.20a  (10/16/2009)
//*  FOR TSMC 65nm 1P7M WIRE BOND PAD PROCESS WITH 4X2Z METAL OPTION  
//*  DRC COMMAND FILE DOCUMENT: T-N65-CL-DR-001-C1 VER 2.0a
//*  DESIGN RULE DOCUMENT: T-N65-CL-DR-001 VER. 2.0 
//*****************************************************************************
//*****************************************************************************
//****************************************************************************
//TSMC developed this deck using Mentor Graphics proprietary SVRF and TVF formats, 
//it is to only be used in Calibre tools.
//****************************************************************************

//OPTIONS
//=======

//#DEFINE PITCH_40_SINGLE	 //Turn on to use IO cell (>=40um pitch) of the single_in_line pad ONLY
//#DEFINE PITCH_45_SINGLE	 //Turn on to use IO cell (>=45um pitch) of the single_in_line pad ONLY
//#DEFINE PITCH_50_SINGLE        //Turn on to use IO cell (>=50um pitch) of the single_in_line pad ONLY
//#DEFINE PITCH_55_SINGLE        //Turn on to use IO cell (>=55um pitch) of the single_in_line pad ONLY
//#DEFINE PITCH_60_SINGLE        //Turn on to use IO cell (>=60um pitch) of the single_in_line pad ONLY

//#DEFINE PITCH_45_STAGGER        //Turn on to use IO cell (>=45um pitch) of the staggered pad ONLY
//#DEFINE PITCH_50_STAGGER        //Turn on to use IO cell (>=50um pitch) of the staggered pad ONLY
#DEFINE PITCH_60_STAGGER       //Turn on to use IO cell (>=60um pitch) of the staggered pad ONLY
//#DEFINE PITCH_70_STAGGER       //Turn on to use IO cell (>=70um pitch) of the staggered pad ONLY
//#DEFINE PITCH_80_STAGGER       //Turn on to use IO cell (>=80um pitch) of the staggered pad ONLY

//#DEFINE PITCH_80_TRITIER       //Turn on to use IO cell (>=80um pitch) of the tri_tier pad ONLY
/* Please note that only one kind of pitch can exist for each pad structure (single_in_line, stagger, tri_tier) */



#DEFINE with_AP                 // Turn on to use AP as the redistribution metal or metal Fuse after passivation (AP_RDL/AP_fuse)



// ENVIRONMENT SETUP
//==================
PRECISION    1000
RESOLUTION      5

LAYOUT SYSTEM GDSII
LAYOUT PATH "GDSFILENAME"
LAYOUT PRIMARY "TOPCELLNAME"

DRC RESULTS DATABASE "DRC_RES.db"
DRC SUMMARY REPORT "DRC.rep"
DRC KEEP EMPTY NO
DRC CHECK TEXT ALL
DRC MAXIMUM RESULTS ALL

FLAG OFFGRID YES
FLAG SKEW YES
FLAG ACUTE YES
FLAG NONSIMPLE YES


VARIABLE SRwidth    20.0 // width of seal ring including assembly isolation region

// DRAWN LAYER DEFINITIONS
//------------------------


LAYER M1i         501                       // Metal1 layer
LAYER MAP 31 DATATYPE 0  501           // Mapping (31;0) to 501 for M1i
LAYER DM1_O       781 
LAYER MAP 31 DATATYPE 7  781          // Mapping (DM1_O, 31;7) to 781 for OPC_M1i, OPC dummy metal
LAYER DUM1        521                      // dummy Metal1
LAYER MAP 31 DATATYPE 1  521          // Mapping (31;1) to 521 for DUM1
LAYER DM1EXCL  371
LAYER MAP 150 DATATYPE 1 371

LAYER M2i         502                       // Metal2 layer
LAYER MAP 32 DATATYPE 0  502           // Mapping (32;0) to 502 for M2i
LAYER DM2_O       782 
LAYER MAP 32 DATATYPE 7  782          // Mapping (DM2_O, 32;7) to 782 for OPC_M2i, OPC dummy metal
LAYER DUM2        522                      // dummy Metal2
LAYER MAP 32 DATATYPE 1  522          // Mapping (32;1) to 522 for DUM2
LAYER DM2EXCL  372
LAYER MAP 150 DATATYPE 2 372

LAYER M3i         503                       // Metal3 layer
LAYER MAP 33 DATATYPE 0  503           // Mapping (33;0) to 503 for M3i
LAYER DM3_O       783 
LAYER MAP 33 DATATYPE 7  783          // Mapping (DM3_O, 33;7) to 783 for OPC_M3i, OPC dummy metal
LAYER DUM3        523                      // dummy Metal3
LAYER MAP 33 DATATYPE 1  523          // Mapping (33;1) to 523 for DUM3
LAYER DM3EXCL  373
LAYER MAP 150 DATATYPE 3 373

LAYER M4i         504                       // Metal4 layer
LAYER MAP 34 DATATYPE 0  504           // Mapping (34;0) to 504 for M4i
LAYER DM4_O       784 
LAYER MAP 34 DATATYPE 7  784          // Mapping (DM4_O, 34;7) to 784 for OPC_M4i, OPC dummy metal
LAYER DUM4        524                      // dummy Metal4
LAYER MAP 34 DATATYPE 1  524          // Mapping (34;1) to 524 for DUM4
LAYER DM4EXCL  374
LAYER MAP 150 DATATYPE 4 374

LAYER M5i         505                       // Metal5 layer
LAYER MAP 35 DATATYPE 0  505           // Mapping (35;0) to 505 for M5i
LAYER DM5_O       785 
LAYER MAP 35 DATATYPE 7  785          // Mapping (DM5_O, 35;7) to 785 for OPC_M5i, OPC dummy metal
LAYER DUM5        525                      // dummy Metal5
LAYER MAP 35 DATATYPE 1  525          // Mapping (35;1) to 525 for DUM5
LAYER DM5EXCL  375
LAYER MAP 150 DATATYPE 5 375

LAYER M6i        506                        // Metal6 layer
LAYER MAP 36 DATATYPE 40 506           // Mapping (36;40) to 506 for M6i
LAYER MAP 36 DATATYPE 0  506           // Mapping (36;0) to 506 for M6i
LAYER DUM6       526                       // dummy Metal6
LAYER MAP 36 DATATYPE 41 526          // Mapping (36;41) to 526 for DUM6
LAYER MAP 36 DATATYPE 1  526          // Mapping (36;1) to 526 for DUM6
LAYER DM6EXCL  376
LAYER MAP 150 DATATYPE 6 376

LAYER M7i        507                        // Metal7 layer
LAYER MAP 37 DATATYPE 40 507           // Mapping (37;40) to 507 for M7i
LAYER MAP 37 DATATYPE 0  507           // Mapping (37;0) to 507 for M7i
LAYER DUM7       527                       // dummy Metal7
LAYER MAP 37 DATATYPE 41 527          // Mapping (37;41) to 527 for DUM7
LAYER MAP 37 DATATYPE 1  527          // Mapping (37;1) to 527 for DUM7
LAYER DM7EXCL  377
LAYER MAP 150 DATATYPE 7 377

LAYER VIA1i      601
LAYER MAP 51 DATATYPE 0  601

LAYER VIA2i      602
LAYER MAP 52 DATATYPE 0  602

LAYER VIA3i      603
LAYER MAP 53 DATATYPE 0  603

LAYER VIA4i      604
LAYER MAP 54 DATATYPE 0  604

LAYER VIA5i      605
LAYER MAP 55 DATATYPE 40 605
LAYER MAP 55 DATATYPE 0  605

LAYER VIA6i      606
LAYER MAP 56 DATATYPE 40 606
LAYER MAP 56 DATATYPE 0  606



LAYER  APi	 74  // AL pad
LAYER  Cu_PPIi   7410 // Cu_PPI interconnection between Polymide1 and Polymide2 for WLCSP
LAYER MAP 74 DATATYPE 10 7410
LAYER  CBi	 76  // passivation window for wire bond pad
LAYER  WBDMY     157 // layer to identify CUP area 

LAYER  CBDi	169 // passivation window for bump pad
LAYER  CB2i	 86 // passivation2 window for bump pad
LAYER  RVi	 85 // Passivation via hole 
LAYER  PMi   	  5 // polyimide window
LAYER  PM1i   	  5001 // polyimide 1 window for WLCSP
LAYER MAP 5 DATATYPE 1 5001
LAYER  PM2i   	  5002 // polyimide 2 window for WLCSP
LAYER MAP 5 DATATYPE 2 5002
LAYER  UBMi	170 // under bump metallurgy
LAYER  FW_AP	 951 // AP fuse window
LAYER MAP 95 DATATYPE 20 951 // Mapping (95;20) to 951 for FW_AP
LAYER  FW_Cu	 952 //  Cu fuse window
LAYER MAP 95 DATATYPE 0 952 // Mapping (95;0) to 952 for FW_CU
FWi = FW_Cu OR FW_AP
LAYER  PMDMY	106 // layer to cover L-target/fuse ring
LAYER  LMARK	109 // layer to cover L-target
LAYER  LOGO	158 // layer to cover logo 
LAYER  ODi      6 7 8 //diffusion areas 
LAYOUT TOP LAYER CBDi RVi CBi APi CB2i PMi UBMi

LAYER  CDUDMY     1650          // dummy layer to cover CDU (critical dimension uniformity) pattern in 10 um assembly isolation
LAYER MAP 165 DATATYPE 0 1650  
LAYER  EMPTY1     6001          // EMPTY LAYER
LAYER  EMPTY2     6002          // EMPTY LAYER
LAYER  EMPTY3     6003          // EMPTY LAYER
// GLOBAL DERIVED LAYERS FOR RULE CHECKS
//--------------------------------------
CHIP	   = EXTENT 
BULK       = SIZE CHIP BY 1.0


CB_ALL   = (CBi OR CB2i) OR RVi
CBHO = HOLES CB_ALL 

CHIP_CORE  = SIZE CHIP BY -SRwidth
SCORE      = CHIP_CORE INSIDE CBHO
SR_EDGE    = (CHIP INTERACT SCORE) NOT SCORE // sealring + assembly isolation


SR_EXC   = EXT SR_EDGE < 73.87 ABUT == 90 REGION INTERSECTING ONLY
SRCSR = SR_EDGE OR SR_EXC // sealring+corner+assembly isolation


CHIP_NOSR  = CHIP NOT INTERACT SR_EDGE   // chip w/o sealring(tsmc added)
CHIP_SR    = CHIP INTERACT SR_EDGE  // chip w/i sealring(customer added)
CHIP_EDGE  = CHIP_NOSR OR SCORE




// EXCLUDE UNCHECKED REGIONS
//--------------------------
M1      =  COPY M1i 
M2      =  COPY M2i 
M3      =  COPY M3i 
M4      =  COPY M4i 
M5      =  COPY M5i 
M6      =  COPY M6i 
M7      =  COPY M7i 
VIA1    =  COPY VIA1i
VIA2    =  COPY VIA2i
VIA3    =  COPY VIA3i
VIA4    =  COPY VIA4i
VIA5    =  COPY VIA5i
VIA6    =  COPY VIA6i
CB_SR 	= ENCLOSE RECTANGLE CBi 0.005 200
CB2_SR 	= ENCLOSE RECTANGLE CB2i 0.005 200
CBx     = ((CBi NOT PMDMY) OUTSIDE CB_SR) NOT INSIDE SR_EDGE 
CB2x    = ((CB2i NOT PMDMY) OUTSIDE CB2_SR) NOT INSIDE SR_EDGE
PM      =  COPY PMi

CB      =  COPY CBx
CB2     =  COPY CB2x 
CBD     =  COPY CBDi
AP      =  COPY APi
RV      =  COPY RVi
UBM     =  COPY UBMi
FW      =  COPY FWi

#IFDEF PITCH_40_SINGLE    
#DEFINE SINGLE_PAD
#ELSE
#IFDEF PITCH_45_SINGLE    
#DEFINE SINGLE_PAD
#ELSE
#IFDEF PITCH_50_SINGLE 
#DEFINE SINGLE_PAD
#ELSE
#IFDEF PITCH_55_SINGLE    
#DEFINE SINGLE_PAD
#ELSE
#IFDEF PITCH_60_SINGLE 
#DEFINE SINGLE_PAD
#ENDIF
#ENDIF
#ENDIF
#ENDIF
#ENDIF


#IFDEF PITCH_45_STAGGER    
#DEFINE STAGGER_PAD
#ELSE
#IFDEF PITCH_50_STAGGER    
#DEFINE STAGGER_PAD
#ELSE
#IFDEF PITCH_60_STAGGER 
#DEFINE STAGGER_PAD
#ELSE
#IFDEF PITCH_70_STAGGER    
#DEFINE STAGGER_PAD
#ELSE
#IFDEF PITCH_80_STAGGER 
#DEFINE STAGGER_PAD
#ENDIF
#ENDIF
#ENDIF
#ENDIF
#ENDIF

#IFDEF PITCH_80_TRITIER 
#DEFINE TRITIER_PAD
#ENDIF


#IFDEF SINGLE_PAD
#IFDEF STAGGER_PAD
#DEFINE MIX
#ENDIF
#IFDEF TRITIER_PAD
#DEFINE MIX
#ENDIF
#ENDIF
#IFDEF STAGGER_PAD
#IFDEF TRITIER_PAD
#DEFINE MIX
#ENDIF
#ENDIF


#IFDEF PITCH_40_SINGLE 
#DEFINE PITCH_LESS_55_SINGLE
#ENDIF

#IFDEF PITCH_45_SINGLE 
#DEFINE PITCH_LESS_55_SINGLE
#ENDIF

#IFDEF PITCH_50_SINGLE 
#DEFINE PITCH_LESS_55_SINGLE
#ENDIF

#IFDEF PITCH_45_STAGGER
#DEFINE PITCH_LESS_55_STAGGER
#ENDIF

#IFDEF PITCH_50_STAGGER
#DEFINE PITCH_LESS_55_STAGGER
#ENDIF

PAD_CB = COPY CBx
PAD_CB_BOX = EXTENT CBx
INNER_RING = SIZE PAD_CB_BOX BY -220
MID_RING = SIZE PAD_CB_BOX BY -10

#IFDEF MIX
INNER_CB_TR = PAD_CB INSIDE INNER_RING
CB_ROW23 = PAD_CB INSIDE MID_RING
CB_ROW2 = CB_ROW23 NOT INNER_CB_TR
A = EXT INNER_CB_TR CB_ROW2 < 80 OPPOSITE REGION 
MID_CB_TR = CB_ROW2 INTERACT A
INNER_CB_ST = CB_ROW2 NOT MID_CB_TR
CB_ROW1 = PAD_CB NOT CB_ROW23
B = EXT MID_CB_TR CB_ROW1 < 80 OPPOSITE REGION 
OUTER_CB_TR = CB_ROW1 INTERACT B
C = EXT INNER_CB_ST CB_ROW1 < 70 OPPOSITE REGION
OUTER_CB_ST = CB_ROW1 INTERACT C
#ELSE
#IFDEF SINGLE_PAD
INNER_CB_TR = COPY EMPTY1
MID_CB_TR = COPY EMPTY2
INNER_CB_ST = COPY EMPTY1
CB_ROW1 = COPY PAD_CB 
OUTER_CB_TR = COPY EMPTY3  
OUTER_CB_ST = COPY EMPTY2
#ELSE
#IFDEF STAGGER_PAD
INNER_CB_TR = COPY EMPTY1
CB_ROW23 = PAD_CB INSIDE MID_RING
CB_ROW2 = CB_ROW23 NOT INNER_CB_TR
MID_CB_TR = COPY EMPTY2
INNER_CB_ST = CB_ROW2 NOT MID_CB_TR
CB_ROW1 = PAD_CB NOT CB_ROW23
OUTER_CB_TR = COPY EMPTY3  
OUTER_CB_ST = COPY CB_ROW1 
#ELSE
#IFDEF TRITIER_PAD
INNER_CB_TR = PAD_CB INSIDE INNER_RING
CB_ROW23 = PAD_CB INSIDE MID_RING
CB_ROW2 = CB_ROW23 NOT INNER_CB_TR
MID_CB_TR = COPY CB_ROW2 
INNER_CB_ST = COPY EMPTY1
CB_ROW1 = PAD_CB NOT CB_ROW23
OUTER_CB_TR = COPY CB_ROW1 
OUTER_CB_ST = COPY EMPTY2
#ELSE
INNER_CB_TR = COPY EMPTY1
MID_CB_TR = COPY EMPTY2
INNER_CB_ST = COPY EMPTY1
CB_ROW1 = COPY EMPTY1 
OUTER_CB_TR = COPY EMPTY3  
OUTER_CB_ST = COPY EMPTY2
#ENDIF
#ENDIF
#ENDIF
#ENDIF


CB_SINGLE_a = (CB_ROW1 NOT OUTER_CB_TR) NOT OUTER_CB_ST
notch_CB_SI = EXT CB_SINGLE_a <5 NOTCH OPPOSITE REGION    
CB_SINGLE   = CB_SINGLE_a OR notch_CB_SI

CB_STAGGER_b = INNER_CB_ST OR OUTER_CB_ST 
notch_CB_ST = EXT CB_STAGGER_b <5 NOTCH OPPOSITE REGION    
CB_STAGGER   = CB_STAGGER_b OR notch_CB_ST

CB_TRI_TIER = (INNER_CB_TR OR MID_CB_TR) OR OUTER_CB_TR

CB_TRI_TIER_NON_CUP = CB_TRI_TIER NOT INTERACT WBDMY
CB_STAGGER_NON_CUP  = CB_STAGGER  NOT INTERACT WBDMY
CB_SINGLE_NON_CUP   = CB_SINGLE   NOT INTERACT WBDMY
CB_TRI_TIER_CUP     = CB_TRI_TIER INTERACT WBDMY
CB_STAGGER_CUP      = CB_STAGGER  INTERACT WBDMY
CB_SINGLE_CUP       = CB_SINGLE   INTERACT WBDMY 
CB_PAD  =  (CB_SINGLE OR CB_STAGGER) OR CB_TRI_TIER
CB_CUP  = CB_PAD INTERACT WBDMY
CB_NONCUP = CB_PAD NOT INTERACT WBDMY

OUTER_CB_ST_NON_CUP = OUTER_CB_ST NOT INTERACT WBDMY
INNER_CB_ST_NON_CUP = INNER_CB_ST NOT INTERACT WBDMY
OUTER_CB_TR_NON_CUP = OUTER_CB_TR NOT INTERACT WBDMY
MID_CB_TR_NON_CUP   = MID_CB_TR   NOT INTERACT WBDMY
INNER_CB_TR_NON_CUP = INNER_CB_TR NOT INTERACT WBDMY

WBM6	 = M6    AND WBDMY
WBVIA6	 = VIA6  AND WBDMY
WBM7	 = M7     AND WBDMY
WBAP	 = AP     AND WBDMY
WBM6_SI = WBM6 INTERACT CB_TRI_TIER_CUP	
WBM6_ST = WBM6 INTERACT CB_STAGGER_CUP
WBM6_TR = WBM6 INTERACT CB_SINGLE_CUP 
WBM7_SI  = WBM7  INTERACT CB_TRI_TIER_CUP	
WBM7_ST  = WBM7  INTERACT CB_STAGGER_CUP
WBM7_TR  = WBM7  INTERACT CB_SINGLE_CUP       


// pad slot
M1CB_SI    = CB_SINGLE_NON_CUP AND M1
SL_M1a_SI  = HOLES M1CB_SI
SL_M1_SI   = SL_M1a_SI INSIDE CB_SINGLE_NON_CUP
SL_SPA1_SI = EXT SL_M1_SI < 7 REGION 
PADH1_SI = SL_SPA1_SI OR SL_M1_SI
PADM1area_SI = SIZE PADH1_SI BY 5
M2CB_SI    = CB_SINGLE_NON_CUP AND M2
SL_M2a_SI  = HOLES M2CB_SI
SL_M2_SI   = SL_M2a_SI INSIDE CB_SINGLE_NON_CUP
SL_SPA2_SI = EXT SL_M2_SI < 7 REGION 
PADH2_SI = SL_SPA2_SI OR SL_M2_SI
PADM2area_SI = SIZE PADH2_SI BY 5
M3CB_SI    = CB_SINGLE_NON_CUP AND M3
SL_M3a_SI  = HOLES M3CB_SI
SL_M3_SI   = SL_M3a_SI INSIDE CB_SINGLE_NON_CUP
SL_SPA3_SI = EXT SL_M3_SI < 7 REGION 
PADH3_SI = SL_SPA3_SI OR SL_M3_SI
PADM3area_SI = SIZE PADH3_SI BY 5
M4CB_SI    = CB_SINGLE_NON_CUP AND M4
SL_M4a_SI  = HOLES M4CB_SI
SL_M4_SI   = SL_M4a_SI INSIDE CB_SINGLE_NON_CUP
SL_SPA4_SI = EXT SL_M4_SI < 7 REGION 
PADH4_SI = SL_SPA4_SI OR SL_M4_SI
PADM4area_SI = SIZE PADH4_SI BY 5
M5CB_SI    = CB_SINGLE_NON_CUP AND M5
SL_M5a_SI  = HOLES M5CB_SI
SL_M5_SI   = SL_M5a_SI INSIDE CB_SINGLE_NON_CUP
SL_SPA5_SI = EXT SL_M5_SI < 7 REGION 
PADH5_SI = SL_SPA5_SI OR SL_M5_SI
PADM5area_SI = SIZE PADH5_SI BY 5
M6CB_SI    = CB_SINGLE_NON_CUP AND M6
SL_M6a_SI  = HOLES M6CB_SI
SL_M6_SI   = SL_M6a_SI INSIDE CB_SINGLE_NON_CUP
SL_SPA6_SI = EXT SL_M6_SI < 7 REGION 
PADH6_SI = SL_SPA6_SI OR SL_M6_SI
PADM6area_SI = SIZE PADH6_SI BY 5
M1CB_ST    = CB_STAGGER_NON_CUP AND M1
SL_M1a_ST  = HOLES M1CB_ST
SL_M1_ST   = SL_M1a_ST INSIDE CB_STAGGER_NON_CUP
SL_SPA1_ST = EXT SL_M1_ST < 7 REGION 
PADH1_ST = SL_SPA1_ST OR SL_M1_ST
PADM1area_ST = SIZE PADH1_ST BY 5
M2CB_ST    = CB_STAGGER_NON_CUP AND M2
SL_M2a_ST  = HOLES M2CB_ST
SL_M2_ST   = SL_M2a_ST INSIDE CB_STAGGER_NON_CUP
SL_SPA2_ST = EXT SL_M2_ST < 7 REGION 
PADH2_ST = SL_SPA2_ST OR SL_M2_ST
PADM2area_ST = SIZE PADH2_ST BY 5
M3CB_ST    = CB_STAGGER_NON_CUP AND M3
SL_M3a_ST  = HOLES M3CB_ST
SL_M3_ST   = SL_M3a_ST INSIDE CB_STAGGER_NON_CUP
SL_SPA3_ST = EXT SL_M3_ST < 7 REGION 
PADH3_ST = SL_SPA3_ST OR SL_M3_ST
PADM3area_ST = SIZE PADH3_ST BY 5
M4CB_ST    = CB_STAGGER_NON_CUP AND M4
SL_M4a_ST  = HOLES M4CB_ST
SL_M4_ST   = SL_M4a_ST INSIDE CB_STAGGER_NON_CUP
SL_SPA4_ST = EXT SL_M4_ST < 7 REGION 
PADH4_ST = SL_SPA4_ST OR SL_M4_ST
PADM4area_ST = SIZE PADH4_ST BY 5
M5CB_ST    = CB_STAGGER_NON_CUP AND M5
SL_M5a_ST  = HOLES M5CB_ST
SL_M5_ST   = SL_M5a_ST INSIDE CB_STAGGER_NON_CUP
SL_SPA5_ST = EXT SL_M5_ST < 7 REGION 
PADH5_ST = SL_SPA5_ST OR SL_M5_ST
PADM5area_ST = SIZE PADH5_ST BY 5
M6CB_ST    = CB_STAGGER_NON_CUP AND M6
SL_M6a_ST  = HOLES M6CB_ST
SL_M6_ST   = SL_M6a_ST INSIDE CB_STAGGER_NON_CUP
SL_SPA6_ST = EXT SL_M6_ST < 7 REGION 
PADH6_ST = SL_SPA6_ST OR SL_M6_ST
PADM6area_ST = SIZE PADH6_ST BY 5
M1CB_TR    = CB_TRI_TIER_NON_CUP AND M1
SL_M1a_TR  = HOLES M1CB_TR
SL_M1_TR   = SL_M1a_TR INSIDE CB_TRI_TIER_NON_CUP
SL_SPA1_TR = EXT SL_M1_TR < 7 REGION 
PADH1_TR = SL_SPA1_TR OR SL_M1_TR
PADM1area_TR = SIZE PADH1_TR BY 5
M2CB_TR    = CB_TRI_TIER_NON_CUP AND M2
SL_M2a_TR  = HOLES M2CB_TR
SL_M2_TR   = SL_M2a_TR INSIDE CB_TRI_TIER_NON_CUP
SL_SPA2_TR = EXT SL_M2_TR < 7 REGION 
PADH2_TR = SL_SPA2_TR OR SL_M2_TR
PADM2area_TR = SIZE PADH2_TR BY 5
M3CB_TR    = CB_TRI_TIER_NON_CUP AND M3
SL_M3a_TR  = HOLES M3CB_TR
SL_M3_TR   = SL_M3a_TR INSIDE CB_TRI_TIER_NON_CUP
SL_SPA3_TR = EXT SL_M3_TR < 7 REGION 
PADH3_TR = SL_SPA3_TR OR SL_M3_TR
PADM3area_TR = SIZE PADH3_TR BY 5
M4CB_TR    = CB_TRI_TIER_NON_CUP AND M4
SL_M4a_TR  = HOLES M4CB_TR
SL_M4_TR   = SL_M4a_TR INSIDE CB_TRI_TIER_NON_CUP
SL_SPA4_TR = EXT SL_M4_TR < 7 REGION 
PADH4_TR = SL_SPA4_TR OR SL_M4_TR
PADM4area_TR = SIZE PADH4_TR BY 5
M5CB_TR    = CB_TRI_TIER_NON_CUP AND M5
SL_M5a_TR  = HOLES M5CB_TR
SL_M5_TR   = SL_M5a_TR INSIDE CB_TRI_TIER_NON_CUP
SL_SPA5_TR = EXT SL_M5_TR < 7 REGION 
PADH5_TR = SL_SPA5_TR OR SL_M5_TR
PADM5area_TR = SIZE PADH5_TR BY 5
M6CB_TR    = CB_TRI_TIER_NON_CUP AND M6
SL_M6a_TR  = HOLES M6CB_TR
SL_M6_TR   = SL_M6a_TR INSIDE CB_TRI_TIER_NON_CUP
SL_SPA6_TR = EXT SL_M6_TR < 7 REGION 
PADH6_TR = SL_SPA6_TR OR SL_M6_TR
PADM6area_TR = SIZE PADH6_TR BY 5

// pad metal (non-CUP) 
PADM1_SI = PADM1area_SI AND M1
PADM2_SI = PADM2area_SI AND M2
PADM3_SI = PADM3area_SI AND M3
PADM4_SI = PADM4area_SI AND M4
PADM5_SI = PADM5area_SI AND M5
PADM6_SI = PADM6area_SI AND M6
PADM7_SI = PADM6area_SI AND M7
L_M1_SI = SL_SPA1_SI AND M1
L_M2_SI = SL_SPA2_SI AND M2
L_M3_SI = SL_SPA3_SI AND M3
L_M4_SI = SL_SPA4_SI AND M4
L_M5_SI = SL_SPA5_SI AND M5
L_M6_SI = SL_SPA6_SI AND M6
PADM1_ST = PADM1area_ST AND M1
PADM2_ST = PADM2area_ST AND M2
PADM3_ST = PADM3area_ST AND M3
PADM4_ST = PADM4area_ST AND M4
PADM5_ST = PADM5area_ST AND M5
PADM6_ST = PADM6area_ST AND M6
PADM7_ST = PADM6area_ST AND M7
L_M1_ST = SL_SPA1_ST AND M1
L_M2_ST = SL_SPA2_ST AND M2
L_M3_ST = SL_SPA3_ST AND M3
L_M4_ST = SL_SPA4_ST AND M4
L_M5_ST = SL_SPA5_ST AND M5
L_M6_ST = SL_SPA6_ST AND M6
PADM1_TR = PADM1area_TR AND M1
PADM2_TR = PADM2area_TR AND M2
PADM3_TR = PADM3area_TR AND M3
PADM4_TR = PADM4area_TR AND M4
PADM5_TR = PADM5area_TR AND M5
PADM6_TR = PADM6area_TR AND M6
PADM7_TR = PADM6area_TR AND M7
L_M1_TR = SL_SPA1_TR AND M1
L_M2_TR = SL_SPA2_TR AND M2
L_M3_TR = SL_SPA3_TR AND M3
L_M4_TR = SL_SPA4_TR AND M4
L_M5_TR = SL_SPA5_TR AND M5
L_M6_TR = SL_SPA6_TR AND M6

// metal ring
R_M1_SI = PADM1_SI NOT L_M1_SI
R_M2_SI = PADM2_SI NOT L_M2_SI
R_M3_SI = PADM3_SI NOT L_M3_SI
R_M4_SI = PADM4_SI NOT L_M4_SI
R_M5_SI = PADM5_SI NOT L_M5_SI
R_M6_SI = PADM6_SI NOT L_M6_SI
R_M1_ST = PADM1_ST NOT L_M1_ST
R_M2_ST = PADM2_ST NOT L_M2_ST
R_M3_ST = PADM3_ST NOT L_M3_ST
R_M4_ST = PADM4_ST NOT L_M4_ST
R_M5_ST = PADM5_ST NOT L_M5_ST
R_M6_ST = PADM6_ST NOT L_M6_ST
R_M1_TR = PADM1_TR NOT L_M1_TR
R_M2_TR = PADM2_TR NOT L_M2_TR
R_M3_TR = PADM3_TR NOT L_M3_TR
R_M4_TR = PADM4_TR NOT L_M4_TR
R_M5_TR = PADM5_TR NOT L_M5_TR
R_M6_TR = PADM6_TR NOT L_M6_TR

// metal cross region
C_M12_SI = L_M1_SI AND L_M2_SI 
C_M23_SI = L_M2_SI AND L_M3_SI 
C_M34_SI = L_M3_SI AND L_M4_SI 
C_M45_SI = L_M4_SI AND L_M5_SI 
C_M56_SI = L_M5_SI AND L_M6_SI 
C_M12_ST = L_M1_ST AND L_M2_ST 
C_M23_ST = L_M2_ST AND L_M3_ST 
C_M34_ST = L_M3_ST AND L_M4_ST 
C_M45_ST = L_M4_ST AND L_M5_ST 
C_M56_ST = L_M5_ST AND L_M6_ST 
C_M12_TR = L_M1_TR AND L_M2_TR 
C_M23_TR = L_M2_TR AND L_M3_TR 
C_M34_TR = L_M3_TR AND L_M4_TR 
C_M45_TR = L_M4_TR AND L_M5_TR 
C_M56_TR = L_M5_TR AND L_M6_TR 


// pad via
PAD_VIA1_SI = VIA1 INTERACT PADM1_SI
PAD_VIA1_SI_NON_CUP =  PAD_VIA1_SI NOT INTERACT WBDMY
PAD_VIA2_SI = VIA2 INTERACT PADM2_SI
PAD_VIA2_SI_NON_CUP =  PAD_VIA2_SI NOT INTERACT WBDMY
PAD_VIA3_SI = VIA3 INTERACT PADM3_SI
PAD_VIA3_SI_NON_CUP =  PAD_VIA3_SI NOT INTERACT WBDMY
PAD_VIA4_SI = VIA4 INTERACT PADM4_SI
PAD_VIA4_SI_NON_CUP =  PAD_VIA4_SI NOT INTERACT WBDMY
PAD_VIA5_SI = VIA5 INTERACT PADM5_SI
PAD_VIA5_SI_NON_CUP =  PAD_VIA5_SI NOT INTERACT WBDMY
PAD_VIA6_SI = VIA6 INTERACT PADM6_SI
PAD_VIA6_SI_NON_CUP =  PAD_VIA6_SI NOT INTERACT WBDMY
PAD_VIA1_ST = VIA1 INTERACT PADM1_ST
PAD_VIA1_ST_NON_CUP = PAD_VIA1_ST NOT INTERACT WBDMY 
PAD_VIA1_ST_OUTER = VIA1 INTERACT OUTER_CB_ST
PAD_VIA1_ST_OUTER_NON_CUP = PAD_VIA1_ST_OUTER NOT INTERACT WBDMY
PAD_VIA1_ST_INNER = VIA1 INTERACT INNER_CB_ST
PAD_VIA1_ST_INNER_NON_CUP = PAD_VIA1_ST_INNER NOT INTERACT WBDMY
PAD_VIA2_ST = VIA2 INTERACT PADM2_ST
PAD_VIA2_ST_NON_CUP = PAD_VIA2_ST NOT INTERACT WBDMY 
PAD_VIA2_ST_OUTER = VIA2 INTERACT OUTER_CB_ST
PAD_VIA2_ST_OUTER_NON_CUP = PAD_VIA2_ST_OUTER NOT INTERACT WBDMY
PAD_VIA2_ST_INNER = VIA2 INTERACT INNER_CB_ST
PAD_VIA2_ST_INNER_NON_CUP = PAD_VIA2_ST_INNER NOT INTERACT WBDMY
PAD_VIA3_ST = VIA3 INTERACT PADM3_ST
PAD_VIA3_ST_NON_CUP = PAD_VIA3_ST NOT INTERACT WBDMY 
PAD_VIA3_ST_OUTER = VIA3 INTERACT OUTER_CB_ST
PAD_VIA3_ST_OUTER_NON_CUP = PAD_VIA3_ST_OUTER NOT INTERACT WBDMY
PAD_VIA3_ST_INNER = VIA3 INTERACT INNER_CB_ST
PAD_VIA3_ST_INNER_NON_CUP = PAD_VIA3_ST_INNER NOT INTERACT WBDMY
PAD_VIA4_ST = VIA4 INTERACT PADM4_ST
PAD_VIA4_ST_NON_CUP = PAD_VIA4_ST NOT INTERACT WBDMY 
PAD_VIA4_ST_OUTER = VIA4 INTERACT OUTER_CB_ST
PAD_VIA4_ST_OUTER_NON_CUP = PAD_VIA4_ST_OUTER NOT INTERACT WBDMY
PAD_VIA4_ST_INNER = VIA4 INTERACT INNER_CB_ST
PAD_VIA4_ST_INNER_NON_CUP = PAD_VIA4_ST_INNER NOT INTERACT WBDMY
PAD_VIA5_ST = VIA5 INTERACT PADM5_ST
PAD_VIA5_ST_NON_CUP = PAD_VIA5_ST NOT INTERACT WBDMY 
PAD_VIA5_ST_OUTER = VIA5 INTERACT OUTER_CB_ST
PAD_VIA5_ST_OUTER_NON_CUP = PAD_VIA5_ST_OUTER NOT INTERACT WBDMY
PAD_VIA5_ST_INNER = VIA5 INTERACT INNER_CB_ST
PAD_VIA5_ST_INNER_NON_CUP = PAD_VIA5_ST_INNER NOT INTERACT WBDMY
PAD_VIA6_ST = VIA6 INTERACT PADM6_ST
PAD_VIA6_ST_NON_CUP = PAD_VIA6_ST NOT INTERACT WBDMY 
PAD_VIA6_ST_OUTER = VIA6 INTERACT OUTER_CB_ST
PAD_VIA6_ST_OUTER_NON_CUP = PAD_VIA6_ST_OUTER NOT INTERACT WBDMY
PAD_VIA6_ST_INNER = VIA6 INTERACT INNER_CB_ST
PAD_VIA6_ST_INNER_NON_CUP = PAD_VIA6_ST_INNER NOT INTERACT WBDMY
PAD_VIA1_TR = VIA1 INTERACT PADM1_TR
PAD_VIA1_TR_NON_CUP = PAD_VIA1_TR NOT INTERACT WBDMY
PAD_VIA1_TR_OUTER = VIA1 INTERACT OUTER_CB_TR
PAD_VIA1_TR_OUTER_NON_CUP = PAD_VIA1_TR_OUTER NOT INTERACT WBDMY
PAD_VIA1_TR_MID = VIA1 INTERACT MID_CB_TR
PAD_VIA1_TR_MID_NON_CUP = PAD_VIA1_TR_MID NOT INTERACT WBDMY
PAD_VIA1_TR_INNER = VIA1 INTERACT INNER_CB_TR
PAD_VIA1_TR_INNER_NON_CUP = PAD_VIA1_TR_INNER NOT INTERACT WBDMY
PAD_VIA2_TR = VIA2 INTERACT PADM2_TR
PAD_VIA2_TR_NON_CUP = PAD_VIA2_TR NOT INTERACT WBDMY
PAD_VIA2_TR_OUTER = VIA2 INTERACT OUTER_CB_TR
PAD_VIA2_TR_OUTER_NON_CUP = PAD_VIA2_TR_OUTER NOT INTERACT WBDMY
PAD_VIA2_TR_MID = VIA2 INTERACT MID_CB_TR
PAD_VIA2_TR_MID_NON_CUP = PAD_VIA2_TR_MID NOT INTERACT WBDMY
PAD_VIA2_TR_INNER = VIA2 INTERACT INNER_CB_TR
PAD_VIA2_TR_INNER_NON_CUP = PAD_VIA2_TR_INNER NOT INTERACT WBDMY
PAD_VIA3_TR = VIA3 INTERACT PADM3_TR
PAD_VIA3_TR_NON_CUP = PAD_VIA3_TR NOT INTERACT WBDMY
PAD_VIA3_TR_OUTER = VIA3 INTERACT OUTER_CB_TR
PAD_VIA3_TR_OUTER_NON_CUP = PAD_VIA3_TR_OUTER NOT INTERACT WBDMY
PAD_VIA3_TR_MID = VIA3 INTERACT MID_CB_TR
PAD_VIA3_TR_MID_NON_CUP = PAD_VIA3_TR_MID NOT INTERACT WBDMY
PAD_VIA3_TR_INNER = VIA3 INTERACT INNER_CB_TR
PAD_VIA3_TR_INNER_NON_CUP = PAD_VIA3_TR_INNER NOT INTERACT WBDMY
PAD_VIA4_TR = VIA4 INTERACT PADM4_TR
PAD_VIA4_TR_NON_CUP = PAD_VIA4_TR NOT INTERACT WBDMY
PAD_VIA4_TR_OUTER = VIA4 INTERACT OUTER_CB_TR
PAD_VIA4_TR_OUTER_NON_CUP = PAD_VIA4_TR_OUTER NOT INTERACT WBDMY
PAD_VIA4_TR_MID = VIA4 INTERACT MID_CB_TR
PAD_VIA4_TR_MID_NON_CUP = PAD_VIA4_TR_MID NOT INTERACT WBDMY
PAD_VIA4_TR_INNER = VIA4 INTERACT INNER_CB_TR
PAD_VIA4_TR_INNER_NON_CUP = PAD_VIA4_TR_INNER NOT INTERACT WBDMY
PAD_VIA5_TR = VIA5 INTERACT PADM5_TR
PAD_VIA5_TR_NON_CUP = PAD_VIA5_TR NOT INTERACT WBDMY
PAD_VIA5_TR_OUTER = VIA5 INTERACT OUTER_CB_TR
PAD_VIA5_TR_OUTER_NON_CUP = PAD_VIA5_TR_OUTER NOT INTERACT WBDMY
PAD_VIA5_TR_MID = VIA5 INTERACT MID_CB_TR
PAD_VIA5_TR_MID_NON_CUP = PAD_VIA5_TR_MID NOT INTERACT WBDMY
PAD_VIA5_TR_INNER = VIA5 INTERACT INNER_CB_TR
PAD_VIA5_TR_INNER_NON_CUP = PAD_VIA5_TR_INNER NOT INTERACT WBDMY
PAD_VIA6_TR = VIA6 INTERACT PADM6_TR
PAD_VIA6_TR_NON_CUP = PAD_VIA6_TR NOT INTERACT WBDMY
PAD_VIA6_TR_OUTER = VIA6 INTERACT OUTER_CB_TR
PAD_VIA6_TR_OUTER_NON_CUP = PAD_VIA6_TR_OUTER NOT INTERACT WBDMY
PAD_VIA6_TR_MID = VIA6 INTERACT MID_CB_TR
PAD_VIA6_TR_MID_NON_CUP = PAD_VIA6_TR_MID NOT INTERACT WBDMY
PAD_VIA6_TR_INNER = VIA6 INTERACT INNER_CB_TR
PAD_VIA6_TR_INNER_NON_CUP = PAD_VIA6_TR_INNER NOT INTERACT WBDMY


DummyRule.ODi { @ An empty check rule to force Calibre use assigned layer to form the correct boundary.
   AREA (EXTENT ODi ) == 0
}

// Warning
//--------
#IFNDEF with_AP 
with_AP.WARN {@ please turn on with_AP option if AP-RDL or AP fuse is used. 
   COPY RV
   COPY FW_AP    
}
#ENDIF


#IFNDEF PITCH_50_SINGLE    
#IFNDEF PITCH_55_SINGLE 
#IFNDEF PITCH_60_STAGGER
#IFNDEF PITCH_70_STAGGER
#IFNDEF PITCH_80_STAGGER
#IFNDEF PITCH_80_TRITIER 
#IFNDEF PITCH_40_SINGLE    
#IFNDEF PITCH_45_SINGLE    
#IFNDEF PITCH_60_SINGLE 
#IFNDEF PITCH_45_STAGGER
#IFNDEF PITCH_50_STAGGER
PITCH_OPTION.ERROR.1 { @ At least one of the pitch options must be selected.
  COPY CHIP
}
#ENDIF
#ENDIF
#ENDIF
#ENDIF
#ENDIF
#ENDIF
#ENDIF     
#ENDIF     
#ENDIF     
#ENDIF     
#ENDIF     

#IFDEF PITCH_40_SINGLE
#IFDEF PITCH_45_SINGLE
PITCH_OPTION.ERROR.A { @ Only one kind of pitch can be selected for single_in_line structure
  COPY CHIP
}
#ENDIF
#ENDIF

#IFDEF PITCH_40_SINGLE
#IFDEF PITCH_50_SINGLE
PITCH_OPTION.ERROR.B { @ Only one kind of pitch can be selected for single_in_line structure
  COPY CHIP
}
#ENDIF
#ENDIF

#IFDEF PITCH_40_SINGLE
#IFDEF PITCH_55_SINGLE
PITCH_OPTION.ERROR.C { @ Only one kind of pitch can be selected for single_in_line structure
  COPY CHIP
}
#ENDIF
#ENDIF

#IFDEF PITCH_40_SINGLE
#IFDEF PITCH_60_SINGLE
PITCH_OPTION.ERROR.D { @ Only one kind of pitch can be selected for single_in_line structure
  COPY CHIP
}
#ENDIF
#ENDIF

#IFDEF PITCH_45_SINGLE
#IFDEF PITCH_50_SINGLE
PITCH_OPTION.ERROR.E { @ Only one kind of pitch can be selected for single_in_line structure
  COPY CHIP
}
#ENDIF
#ENDIF

#IFDEF PITCH_45_SINGLE
#IFDEF PITCH_55_SINGLE
PITCH_OPTION.ERROR.F { @ Only one kind of pitch can be selected for single_in_line structure
  COPY CHIP
}
#ENDIF
#ENDIF

#IFDEF PITCH_45_SINGLE
#IFDEF PITCH_60_SINGLE
PITCH_OPTION.ERROR.G { @ Only one kind of pitch can be selected for single_in_line structure
  COPY CHIP
}
#ENDIF
#ENDIF

#IFDEF PITCH_50_SINGLE
#IFDEF PITCH_55_SINGLE
PITCH_OPTION.ERROR.2 { @ Only one kind of pitch can be selected for single_in_line structure
  COPY CHIP
}
#ENDIF
#ENDIF

#IFDEF PITCH_50_SINGLE
#IFDEF PITCH_60_SINGLE
PITCH_OPTION.ERROR.H { @ Only one kind of pitch can be selected for single_in_line structure
  COPY CHIP
}
#ENDIF
#ENDIF

#IFDEF PITCH_55_SINGLE
#IFDEF PITCH_60_SINGLE
PITCH_OPTION.ERROR.I { @ Only one kind of pitch can be selected for single_in_line structure
  COPY CHIP
}
#ENDIF
#ENDIF
#IFDEF PITCH_45_STAGGER
#IFDEF PITCH_50_STAGGER
PITCH_OPTION.ERROR.J { @ Only one kind of pitch can be selected for staggered structure
  COPY CHIP
}
#ENDIF
#ENDIF

#IFDEF PITCH_45_STAGGER
#IFDEF PITCH_60_STAGGER
PITCH_OPTION.ERROR.K { @ Only one kind of pitch can be selected for staggered structure
  COPY CHIP
}
#ENDIF
#ENDIF

#IFDEF PITCH_45_STAGGER
#IFDEF PITCH_70_STAGGER
PITCH_OPTION.ERROR.L { @ Only one kind of pitch can be selected for staggered structure
  COPY CHIP
}
#ENDIF
#ENDIF

#IFDEF PITCH_45_STAGGER
#IFDEF PITCH_80_STAGGER
PITCH_OPTION.ERROR.M { @ Only one kind of pitch can be selected for staggered structure
  COPY CHIP
}
#ENDIF
#ENDIF

#IFDEF PITCH_50_STAGGER
#IFDEF PITCH_60_STAGGER
PITCH_OPTION.ERROR.N { @ Only one kind of pitch can be selected for staggered structure
  COPY CHIP
}
#ENDIF
#ENDIF

#IFDEF PITCH_50_STAGGER
#IFDEF PITCH_70_STAGGER
PITCH_OPTION.ERROR.O { @ Only one kind of pitch can be selected for staggered structure
  COPY CHIP
}
#ENDIF
#ENDIF

#IFDEF PITCH_50_STAGGER
#IFDEF PITCH_80_STAGGER
PITCH_OPTION.ERROR.P { @ Only one kind of pitch can be selected for staggered structure
  COPY CHIP
}
#ENDIF
#ENDIF

#IFDEF PITCH_60_STAGGER
#IFDEF PITCH_70_STAGGER
PITCH_OPTION.ERROR.3 { @ Only one kind of pitch can be selected for staggered structure
  COPY CHIP
}
#ENDIF
#ENDIF

#IFDEF PITCH_60_STAGGER
#IFDEF PITCH_80_STAGGER
PITCH_OPTION.ERROR.4 { @ Only one kind of pitch can be selected for staggered structure
  COPY CHIP
}
#ENDIF
#ENDIF
#IFDEF PITCH_70_STAGGER
#IFDEF PITCH_80_STAGGER
PITCH_OPTION.ERROR.5 { @ Only one kind of pitch can be selected for staggered structure
  COPY CHIP
}
#ENDIF
#ENDIF




// Pad Pitch Rule
//===============

// Single in-line
//---------------
#IFDEF PITCH_40_SINGLE
VARIABLE CB_W_1_P40_SI 35
VARIABLE CB_S_1_P40_SI 5
VARIABLE CB_W_2_P40_SI 70

CB.W.1.P40.SI { @ CB width >= ^CB_W_1_P40_SI um
  INT CB_SINGLE < CB_W_1_P40_SI ABUT < 90 PARALLEL ONLY REGION
}
CB.S.1.P40.SI { @ CB space >= ^ CB_S_1_P40_SI um
  EXT CB_SINGLE < CB_S_1_P40_SI ABUT < 90 SINGULAR REGION
}

CB.W.2.P40.SI { @ CB length (the edge perpendicular to nearby chip edge) >= ^CB_W_2_P40_SI um
  NOT ENCLOSE RECTANGLE  CB_SINGLE 0.001  CB_W_2_P40_SI -0.001 ORTHOGONAL ONLY
}

#ENDIF

#IFDEF PITCH_45_SINGLE
VARIABLE CB_W_1_P45_SI 40
VARIABLE CB_S_1_P45_SI 5
VARIABLE CB_W_2_P45_SI 80

CB.W.1.P45.SI { @ CB width >= ^CB_W_1_P45_SI um
  INT CB_SINGLE < CB_W_1_P45_SI ABUT < 90 PARALLEL ONLY REGION
}
CB.S.1.P45.SI { @ CB space >= ^ CB_S_1_P45_SI um
  EXT CB_SINGLE < CB_S_1_P45_SI ABUT < 90 SINGULAR REGION
}

CB.W.2.P45.SI { @ CB length (the edge perpendicular to nearby chip edge) >= ^CB_W_2_P45_SI um
  NOT ENCLOSE RECTANGLE  CB_SINGLE 0.001  CB_W_2_P45_SI -0.001 ORTHOGONAL ONLY
}

#ENDIF

#IFDEF PITCH_60_SINGLE
VARIABLE CB_W_1_P60_SI 54
VARIABLE CB_S_1_P60_SI 6
VARIABLE CB_W_2_P60_SI 66

CB.W.1.P60.SI { @ CB width >= ^CB_W_1_P60_SI um
  INT CB_SINGLE < CB_W_1_P60_SI ABUT < 90 PARALLEL ONLY REGION
}
CB.S.1.P60.SI { @ CB space >= ^ CB_S_1_P60_SI um
  EXT CB_SINGLE < CB_S_1_P60_SI ABUT < 90 SINGULAR REGION
}

CB.W.2.P60.SI { @ CB length (the edge perpendicular to nearby chip edge) >= ^CB_W_2_P60_SI um
  NOT ENCLOSE RECTANGLE  CB_SINGLE 0.001  CB_W_2_P60_SI -0.001 ORTHOGONAL ONLY
}

#ENDIF

#IFDEF PITCH_45_STAGGER
VARIABLE CB_W_1_P45_ST 40
VARIABLE CB_W_2_P45_ST 80
VARIABLE CB_S_1_P45_ST 5
VARIABLE CB_W_3_P45_ST 20

CB.W.1.P45.ST { @ CB width >= ^CB_W_1_P45_ST um
  INT CB_STAGGER < CB_W_1_P45_ST ABUT < 90 PARALLEL ONLY REGION
}
CB.W.2.P45.ST { @ CB length (the edge perpendicular to nearby chip edge) >= ^CB_W_2_P45_ST um
  NOT ENCLOSE RECTANGLE CB_STAGGER 0.001 CB_W_2_P45_ST -0.001  ORTHOGONAL ONLY
}
CB.S.1.P45.ST { @ CB space >= ^CB_S_1_P45_ST um
  EXT CB_STAGGER < CB_S_1_P45_ST ABUT < 90 SINGULAR REGION
}


CB.W.3.M1.P45.ST { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under inner pad >= ^CB_W_3_P45_ST um
  X = PADM1area_ST INTERACT INNER_CB_ST
  INT X < CB_W_3_P45_ST ABUT < 90 SINGULAR REGION
}

CB.W.3.M2.P45.ST { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under inner pad >= ^CB_W_3_P45_ST um
  X = PADM2area_ST INTERACT INNER_CB_ST
  INT X < CB_W_3_P45_ST ABUT < 90 SINGULAR REGION
}

CB.W.3.M3.P45.ST { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under inner pad >= ^CB_W_3_P45_ST um
  X = PADM3area_ST INTERACT INNER_CB_ST
  INT X < CB_W_3_P45_ST ABUT < 90 SINGULAR REGION
}

CB.W.3.M4.P45.ST { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under inner pad >= ^CB_W_3_P45_ST um
  X = PADM4area_ST INTERACT INNER_CB_ST
  INT X < CB_W_3_P45_ST ABUT < 90 SINGULAR REGION
}


#ENDIF

#IFDEF PITCH_50_STAGGER
VARIABLE CB_W_1_P50_ST 44
VARIABLE CB_W_2_P50_ST 80
VARIABLE CB_S_1_P50_ST 6
VARIABLE CB_W_3_P50_ST 20

CB.W.1.P50.ST { @ CB width >= ^CB_W_1_P50_ST um
  INT CB_STAGGER < CB_W_1_P50_ST ABUT < 90 PARALLEL ONLY REGION
}
CB.W.2.P50.ST { @ CB length (the edge perpendicular to nearby chip edge) >= ^CB_W_2_P50_ST um
  NOT ENCLOSE RECTANGLE CB_STAGGER 0.001 CB_W_2_P50_ST -0.001 ORTHOGONAL ONLY
}
CB.S.1.P50.ST { @ CB space >= ^CB_S_1_P50_ST um
  EXT CB_STAGGER < CB_S_1_P50_ST ABUT < 90 SINGULAR REGION
}


CB.W.3.M1.P50.ST { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under inner pad >= ^CB_W_3_P50_ST um
  X = PADM1area_ST INTERACT INNER_CB_ST
  INT X < CB_W_3_P50_ST ABUT < 90 SINGULAR REGION
}

CB.W.3.M2.P50.ST { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under inner pad >= ^CB_W_3_P50_ST um
  X = PADM2area_ST INTERACT INNER_CB_ST
  INT X < CB_W_3_P50_ST ABUT < 90 SINGULAR REGION
}

CB.W.3.M3.P50.ST { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under inner pad >= ^CB_W_3_P50_ST um
  X = PADM3area_ST INTERACT INNER_CB_ST
  INT X < CB_W_3_P50_ST ABUT < 90 SINGULAR REGION
}

CB.W.3.M4.P50.ST { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under inner pad >= ^CB_W_3_P50_ST um
  X = PADM4area_ST INTERACT INNER_CB_ST
  INT X < CB_W_3_P50_ST ABUT < 90 SINGULAR REGION
}


#ENDIF


#IFDEF PITCH_50_SINGLE
VARIABLE CB_W_1_P50_SI 44
VARIABLE CB_S_1_P50_SI 6


VARIABLE CB_W_2_P50_SI 80

CB.W.1.P50.SI { @ CB width >= ^CB_W_1_P50_SI um
  INT CB_SINGLE < CB_W_1_P50_SI ABUT < 90 PARALLEL ONLY REGION
}
CB.S.1.P50.SI { @ CB space >= ^ CB_S_1_P50_SI um
  EXT CB_SINGLE < CB_S_1_P50_SI ABUT < 90 SINGULAR REGION
}

CB.W.2.P50.SI { @ CB length (the edge perpendicular to nearby chip edge) >= ^CB_W_2_P50_SI um
  NOT ENCLOSE RECTANGLE  CB_SINGLE 0.001  CB_W_2_P50_SI -0.001 ORTHOGONAL ONLY
}


#ENDIF

#IFDEF PITCH_55_SINGLE
VARIABLE CB_W_1_P55_SI 49
VARIABLE CB_S_1_P55_SI 6


CB.W.1.P55.SI { @ CB width >= ^CB_W_1_P55_SI um
  INT CB_SINGLE < CB_W_1_P55_SI ABUT < 90 PARALLEL ONLY REGION
}
CB.S.1.P55.SI { @ CB space >= ^CB_S_1_P55_SI um
  EXT CB_SINGLE < CB_S_1_P55_SI ABUT < 90 SINGULAR REGION
}
CB.W.2.P55.SI { @ CB length (the edge perpendicular to nearby chip edge) >= 66um
  NOT ENCLOSE RECTANGLE CB_SINGLE 0.001 65.999 ORTHOGONAL ONLY    
}
#ENDIF

#IFDEF PITCH_LESS_55_SINGLE
CB.R.1.SI { @ For 50um <= pad pitch < 55um, one pair of notches on each pad CB is required. Notch size = 1.5umx3.0um. 
  VERTEX CB_SINGLE_a != 16
  CB_SINGLE_a TOUCH notch_CB_SI < 2
  CB_SINGLE_a NOT TOUCH notch_CB_SI
  NOT RECTANGLE notch_CB_SI == 1.5 BY == 3.0 ORTHOGONAL ONLY
}
#ENDIF

CB.EN.1.M1.SI { @ CB enclosure by M1 pad regions >= 1.5um
  ENC CB_SINGLE_NON_CUP M1 < 1.5 ABUT <90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M1
}
CB.EN.1.M2.SI { @ CB enclosure by M2 pad regions >= 1.5um
  ENC CB_SINGLE_NON_CUP M2 < 1.5 ABUT <90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M2
}
CB.EN.1.M3.SI { @ CB enclosure by M3 pad regions >= 1.5um
  ENC CB_SINGLE_NON_CUP M3 < 1.5 ABUT <90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M3
}
CB.EN.1.M4.SI { @ CB enclosure by M4 pad regions >= 1.5um
  ENC CB_SINGLE_NON_CUP M4 < 1.5 ABUT <90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M4
}
CB.EN.1.M5.SI { @ CB enclosure by M5 pad regions >= 1.5um
  ENC CB_SINGLE_NON_CUP M5 < 1.5 ABUT <90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M5
}
CB.EN.1.M6.SI { @ CB enclosure by M6 pad regions >= 1.5um
  ENC CB_SINGLE_NON_CUP M6 < 1.5 ABUT <90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M6
}
CB.EN.1.M7.SI { @ CB enclosure by M7 pad regions >= 1.5um
  ENC CB_SINGLE_NON_CUP M7 < 1.5 ABUT <90 SINGULAR REGION
  CB_SINGLE_NON_CUP OUTSIDE EDGE M7
}



// Staggered
//----------
#IFDEF PITCH_60_STAGGER
VARIABLE CB_W_1_P60_ST 53
VARIABLE CB_S_1_P60_ST 7
CB.W.1.P60.ST { @ CB width >= ^CB_W_1_P60_ST um
  INT CB_STAGGER < CB_W_1_P60_ST ABUT < 90 PARALLEL ONLY REGION
}
CB.S.1.P60.ST { @ CB space >= ^ CB_S_1_P60_ST um
  EXT CB_STAGGER < CB_S_1_P60_ST ABUT < 90 SINGULAR REGION
}
CB.W.2.P60.ST { @ CB length (the edge perpendicular to nearby chip edge) >= 66um
  NOT ENCLOSE RECTANGLE CB_STAGGER 0.001 65.999 ORTHOGONAL ONLY
}
CB.W.3.M1.P60.ST { @ Width of pad metal under CB region. M1,M2~Mtop-3 under inner pad >= 20um
  X = PADM1area_ST INTERACT INNER_CB_ST
  INT X < 20 ABUT < 90 SINGULAR REGION
}

CB.W.3.M2.P60.ST { @ Width of pad metal under CB region. M1,M2~Mtop-3 under inner pad >= 20um
  X = PADM2area_ST INTERACT INNER_CB_ST
  INT X < 20 ABUT < 90 SINGULAR REGION
}

CB.W.3.M3.P60.ST { @ Width of pad metal under CB region. M1,M2~Mtop-3 under inner pad >= 20um
  X = PADM3area_ST INTERACT INNER_CB_ST
  INT X < 20 ABUT < 90 SINGULAR REGION
}

CB.W.3.M4.P60.ST { @ Width of pad metal under CB region. M1,M2~Mtop-3 under inner pad >= 20um
  X = PADM4area_ST INTERACT INNER_CB_ST
  INT X < 20 ABUT < 90 SINGULAR REGION
}


#ENDIF

#IFDEF PITCH_70_STAGGER
CB.W.1.P70.ST { @ CB width >= 58um
  INT CB_STAGGER < 58 ABUT < 90 PARALLEL ONLY REGION
}
CB.W.2.P70.ST { @ CB length (the edge perpendicular to nearby chip edge) >= 66um
  NOT ENCLOSE RECTANGLE CB_STAGGER 0.001 66 -0.001 ORTHOGONAL ONLY
}
CB.S.1.P70.ST { @ CB space >= 6um
  EXT CB_STAGGER < 6 ABUT < 90 SINGULAR REGION
}
CB.W.3.M1.P70.ST { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under inner pad >= 45um
  X = PADM1area_ST INTERACT INNER_CB_ST
  INT X < 45 ABUT < 90 SINGULAR REGION
}

CB.W.3.M2.P70.ST { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under inner pad >= 45um
  X = PADM2area_ST INTERACT INNER_CB_ST
  INT X < 45 ABUT < 90 SINGULAR REGION
}

CB.W.3.M3.P70.ST { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under inner pad >= 45um
  X = PADM3area_ST INTERACT INNER_CB_ST
  INT X < 45 ABUT < 90 SINGULAR REGION
}

CB.W.3.M4.P70.ST { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under inner pad >= 45um
  X = PADM4area_ST INTERACT INNER_CB_ST
  INT X < 45 ABUT < 90 SINGULAR REGION
}


#ENDIF
#IFDEF PITCH_80_STAGGER
CB.W.1.P80.ST { @ CB width >= 65um
  INT CB_STAGGER < 65 ABUT < 90 PARALLEL ONLY REGION
}
CB.W.2.P80.ST { @ CB length (the edge perpendicular to nearby chip edge) >= 75um
  NOT ENCLOSE RECTANGLE CB_STAGGER 0.001 74.999 ORTHOGONAL ONLY
}
CB.S.1.P80.ST { @ CB space >= 6um
  EXT CB_STAGGER < 6 ABUT < 90 SINGULAR REGION
}
CB.W.3.M1.P80.ST { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under inner pad >= 50um
  X = PADM1area_ST INTERACT INNER_CB_ST
  INT X < 50 ABUT < 90 SINGULAR REGION
}

CB.W.3.M2.P80.ST { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under inner pad >= 50um
  X = PADM2area_ST INTERACT INNER_CB_ST
  INT X < 50 ABUT < 90 SINGULAR REGION
}

CB.W.3.M3.P80.ST { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under inner pad >= 50um
  X = PADM3area_ST INTERACT INNER_CB_ST
  INT X < 50 ABUT < 90 SINGULAR REGION
}

CB.W.3.M4.P80.ST { @ Width of pad metal under CB region. M1,M2,~Mtop-3 under inner pad >= 50um
  X = PADM4area_ST INTERACT INNER_CB_ST
  INT X < 50 ABUT < 90 SINGULAR REGION
}


#ENDIF


#IFDEF PITCH_LESS_55_STAGGER
CB.R.1.ST { @ For pad pitch < 55um, one pair of notches on each pad CB is required. Notch size = 1.5umx3.0um. 
  VERTEX CB_STAGGER_b != 16
  CB_STAGGER_b TOUCH notch_CB_ST < 2
  CB_STAGGER_b NOT TOUCH notch_CB_ST
  NOT RECTANGLE notch_CB_ST == 1.5 BY == 3.0 ORTHOGONAL ONLY
}
#ENDIF

CB.EN.1.M1.ST { @ CB enclosure by M1 pad regions >= 1.5um
  ENC OUTER_CB_ST_NON_CUP M1 < 1.5 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M1
}
CB.EN.1.M2.ST { @ CB enclosure by M2 pad regions >= 1.5um
  ENC OUTER_CB_ST_NON_CUP M2 < 1.5 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M2
}
CB.EN.1.M3.ST { @ CB enclosure by M3 pad regions >= 1.5um
  ENC OUTER_CB_ST_NON_CUP M3 < 1.5 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M3
}
CB.EN.1.M4.ST { @ CB enclosure by M4 pad regions >= 1.5um
  ENC OUTER_CB_ST_NON_CUP M4 < 1.5 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M4
}
CB.EN.1.M5.ST { @ CB enclosure by M5 pad regions >= 1.5um
  ENC OUTER_CB_ST_NON_CUP M5 < 1.5 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M5
  ENC INNER_CB_ST_NON_CUP M5 < 1.5 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M5
}
CB.EN.1.M6.ST { @ CB enclosure by M6 pad regions >= 1.5um
  ENC OUTER_CB_ST_NON_CUP M6 < 1.5 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M6
  ENC INNER_CB_ST_NON_CUP M6 < 1.5 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M6
}
CB.EN.1.M7.ST { @ CB enclosure by M7 pad regions >= 1.5um
  ENC OUTER_CB_ST_NON_CUP M7 < 1.5 ABUT < 90 SINGULAR REGION
  OUTER_CB_ST_NON_CUP OUTSIDE EDGE M7
  ENC INNER_CB_ST_NON_CUP M7 < 1.5 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M7
}


// Tri-Tiers
//----------
CB.W.1.P80.TR { @ CB width >= 65um
  INT CB_TRI_TIER < 65 ABUT < 90 PARALLEL ONLY REGION
}
CB.W.2.P80.TR { @ CB length (the edge perpendicular to nearby chip edge) >= 75um
  NOT ENCLOSE RECTANGLE CB_TRI_TIER 0.001 74.999 ORTHOGONAL ONLY
}
CB.S.1.P80.TR { @ CB space >= 6um
  EXT CB_TRI_TIER < 6 ABUT < 90 SINGULAR REGION
}
CB.W.3a.M1.TR { @ Width of pad metal under CB region. M1~Mtop-3 under middle pad >= 50um
  X = PADM1area_TR NOT OUTSIDE MID_CB_TR
  INT X < 50 ABUT < 90 SINGULAR REGION
}

CB.W.3a.M2.TR { @ Width of pad metal under CB region. M1~Mtop-3 under middle pad >= 50um
  X = PADM2area_TR NOT OUTSIDE MID_CB_TR
  INT X < 50 ABUT < 90 SINGULAR REGION
}

CB.W.3a.M3.TR { @ Width of pad metal under CB region. M1~Mtop-3 under middle pad >= 50um
  X = PADM3area_TR NOT OUTSIDE MID_CB_TR
  INT X < 50 ABUT < 90 SINGULAR REGION
}

CB.W.3a.M4.TR { @ Width of pad metal under CB region. M1~Mtop-3 under middle pad >= 50um
  X = PADM4area_TR NOT OUTSIDE MID_CB_TR
  INT X < 50 ABUT < 90 SINGULAR REGION
}



CB.W.3b.M2.TR { @ Width of pad metal under CB region. M2~Mtop-3 under inner pad >= 50um
  X = PADM2area_TR NOT OUTSIDE INNER_CB_TR
  INT X < 50 ABUT <90 SINGULAR REGION
}

CB.W.3b.M3.TR { @ Width of pad metal under CB region. M2~Mtop-3 under inner pad >= 50um
  X = PADM3area_TR NOT OUTSIDE INNER_CB_TR
  INT X < 50 ABUT <90 SINGULAR REGION
}

CB.W.3b.M4.TR { @ Width of pad metal under CB region. M2~Mtop-3 under inner pad >= 50um
  X = PADM4area_TR NOT OUTSIDE INNER_CB_TR
  INT X < 50 ABUT <90 SINGULAR REGION
}



CB.EN.1.M1.TR { @ CB enclosure by M1 pad regions >= 1.5um
  ENC OUTER_CB_TR_NON_CUP M1 < 1.5 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M1
}
CB.EN.1.M2.TR { @ CB enclosure by M2 pad regions >= 1.5um
  ENC OUTER_CB_TR_NON_CUP M2 < 1.5 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M2
}
CB.EN.1.M3.TR { @ CB enclosure by M3 pad regions >= 1.5um
  ENC OUTER_CB_TR_NON_CUP M3 < 1.5 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M3
}
CB.EN.1.M4.TR { @ CB enclosure by M4 pad regions >= 1.5um
  ENC OUTER_CB_TR_NON_CUP M4 < 1.5 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M4
}
CB.EN.1.M5.TR { @ CB enclosure by M5 pad regions >= 1.5um
  ENC OUTER_CB_TR_NON_CUP M5 < 1.5 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M5
  ENC MID_CB_TR_NON_CUP M5 < 1.5 ABUT < 90 SINGULAR REGION
  MID_CB_TR_NON_CUP OUTSIDE EDGE M5
  ENC INNER_CB_ST_NON_CUP M5 < 1.5 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M5
}
CB.EN.1.M6.TR { @ CB enclosure by M6 pad regions >= 1.5um
  ENC OUTER_CB_TR_NON_CUP M6 < 1.5 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M6
  ENC MID_CB_TR_NON_CUP M6 < 1.5 ABUT < 90 SINGULAR REGION
  MID_CB_TR_NON_CUP OUTSIDE EDGE M6
  ENC INNER_CB_ST_NON_CUP M6 < 1.5 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M6
}
CB.EN.1.M7.TR { @ CB enclosure by M7 pad regions >= 1.5um
  ENC OUTER_CB_TR_NON_CUP M7 < 1.5 ABUT < 90 SINGULAR REGION
  OUTER_CB_TR_NON_CUP OUTSIDE EDGE M7
  ENC MID_CB_TR_NON_CUP M7 < 1.5 ABUT < 90 SINGULAR REGION
  MID_CB_TR_NON_CUP OUTSIDE EDGE M7
  ENC INNER_CB_ST_NON_CUP M7 < 1.5 ABUT < 90 SINGULAR REGION
  INNER_CB_ST_NON_CUP OUTSIDE EDGE M7
}


CB.S.2.M1 { @ Space of 2 pad metals, or between pad metal and metal >= 2.5um
   EXT R_M1_SI < 2.5 ABUT >0 <90 SINGULAR REGION
   X_SI = M1i NOT PADM1_SI
   A_SI = EXT PADM1_SI X_SI < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_SI = X_SI COIN EDGE A_SI
   C_SI = M1i COIN EDGE B_SI
   (EXT C_SI M1i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
   EXT R_M1_ST < 2.5 ABUT >0 <90 SINGULAR REGION
   X_ST = M1i NOT PADM1_ST
   A_ST = EXT PADM1_ST X_ST < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_ST = X_ST COIN EDGE A_ST
   C_ST = M1i COIN EDGE B_ST
   (EXT C_ST M1i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
   EXT R_M1_TR < 2.5 ABUT >0 <90 SINGULAR REGION
   X_TR = M1i NOT PADM1_TR
   A_TR = EXT PADM1_TR X_TR < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_TR = X_TR COIN EDGE A_TR
   C_TR = M1i COIN EDGE B_TR
   (EXT C_TR M1i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
}
CB.S.2.M2 { @ Space of 2 pad metals, or between pad metal and metal >= 2.5um
   EXT R_M2_SI < 2.5 ABUT >0 <90 SINGULAR REGION
   X_SI = M2i NOT PADM2_SI
   A_SI = EXT PADM2_SI X_SI < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_SI = X_SI COIN EDGE A_SI
   C_SI = M2i COIN EDGE B_SI
   (EXT C_SI M2i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
   EXT R_M2_ST < 2.5 ABUT >0 <90 SINGULAR REGION
   X_ST = M2i NOT PADM2_ST
   A_ST = EXT PADM2_ST X_ST < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_ST = X_ST COIN EDGE A_ST
   C_ST = M2i COIN EDGE B_ST
   (EXT C_ST M2i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
   EXT R_M2_TR < 2.5 ABUT >0 <90 SINGULAR REGION
   X_TR = M2i NOT PADM2_TR
   A_TR = EXT PADM2_TR X_TR < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_TR = X_TR COIN EDGE A_TR
   C_TR = M2i COIN EDGE B_TR
   (EXT C_TR M2i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
}
CB.S.2.M3 { @ Space of 2 pad metals, or between pad metal and metal >= 2.5um
   EXT R_M3_SI < 2.5 ABUT >0 <90 SINGULAR REGION
   X_SI = M3i NOT PADM3_SI
   A_SI = EXT PADM3_SI X_SI < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_SI = X_SI COIN EDGE A_SI
   C_SI = M3i COIN EDGE B_SI
   (EXT C_SI M3i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
   EXT R_M3_ST < 2.5 ABUT >0 <90 SINGULAR REGION
   X_ST = M3i NOT PADM3_ST
   A_ST = EXT PADM3_ST X_ST < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_ST = X_ST COIN EDGE A_ST
   C_ST = M3i COIN EDGE B_ST
   (EXT C_ST M3i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
   EXT R_M3_TR < 2.5 ABUT >0 <90 SINGULAR REGION
   X_TR = M3i NOT PADM3_TR
   A_TR = EXT PADM3_TR X_TR < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_TR = X_TR COIN EDGE A_TR
   C_TR = M3i COIN EDGE B_TR
   (EXT C_TR M3i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
}
CB.S.2.M4 { @ Space of 2 pad metals, or between pad metal and metal >= 2.5um
   EXT R_M4_SI < 2.5 ABUT >0 <90 SINGULAR REGION
   X_SI = M4i NOT PADM4_SI
   A_SI = EXT PADM4_SI X_SI < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_SI = X_SI COIN EDGE A_SI
   C_SI = M4i COIN EDGE B_SI
   (EXT C_SI M4i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
   EXT R_M4_ST < 2.5 ABUT >0 <90 SINGULAR REGION
   X_ST = M4i NOT PADM4_ST
   A_ST = EXT PADM4_ST X_ST < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_ST = X_ST COIN EDGE A_ST
   C_ST = M4i COIN EDGE B_ST
   (EXT C_ST M4i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
   EXT R_M4_TR < 2.5 ABUT >0 <90 SINGULAR REGION
   X_TR = M4i NOT PADM4_TR
   A_TR = EXT PADM4_TR X_TR < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_TR = X_TR COIN EDGE A_TR
   C_TR = M4i COIN EDGE B_TR
   (EXT C_TR M4i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
}
CB.S.2.M5 { @ Space of 2 pad metals, or between pad metal and metal >= 2.5um
   EXT R_M5_SI < 2.5 ABUT >0 <90 SINGULAR REGION
   X_SI = M5i NOT PADM5_SI
   A_SI = EXT PADM5_SI X_SI < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_SI = X_SI COIN EDGE A_SI
   C_SI = M5i COIN EDGE B_SI
   (EXT C_SI M5i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
   EXT R_M5_ST < 2.5 ABUT >0 <90 SINGULAR REGION
   X_ST = M5i NOT PADM5_ST
   A_ST = EXT PADM5_ST X_ST < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_ST = X_ST COIN EDGE A_ST
   C_ST = M5i COIN EDGE B_ST
   (EXT C_ST M5i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
   EXT R_M5_TR < 2.5 ABUT >0 <90 SINGULAR REGION
   X_TR = M5i NOT PADM5_TR
   A_TR = EXT PADM5_TR X_TR < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_TR = X_TR COIN EDGE A_TR
   C_TR = M5i COIN EDGE B_TR
   (EXT C_TR M5i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
}
CB.S.2.M6 { @ Space of 2 pad metals, or between pad metal and metal >= 2.5um
   EXT R_M6_SI < 2.5 ABUT >0 <90 SINGULAR REGION
   X_SI = M6i NOT PADM6_SI
   A_SI = EXT PADM6_SI X_SI < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_SI = X_SI COIN EDGE A_SI
   C_SI = M6i COIN EDGE B_SI
   (EXT C_SI M6i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
   EXT R_M6_ST < 2.5 ABUT >0 <90 SINGULAR REGION
   X_ST = M6i NOT PADM6_ST
   A_ST = EXT PADM6_ST X_ST < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_ST = X_ST COIN EDGE A_ST
   C_ST = M6i COIN EDGE B_ST
   (EXT C_ST M6i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
   EXT R_M6_TR < 2.5 ABUT >0 <90 SINGULAR REGION
   X_TR = M6i NOT PADM6_TR
   A_TR = EXT PADM6_TR X_TR < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_TR = X_TR COIN EDGE A_TR
   C_TR = M6i COIN EDGE B_TR
   (EXT C_TR M6i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
}
CB.S.2.M7 { @ Space of 2 pad metals, or between pad metal and metal >= 2.5um
   EXT PADM7_SI < 2.5 ABUT >0 <90 SINGULAR REGION
   X_SI = M7i NOT PADM7_SI
   A_SI = EXT PADM7_SI X_SI < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_SI = X_SI COIN EDGE A_SI
   C_SI = M7i COIN EDGE B_SI
   (EXT C_SI M7i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
   EXT PADM7_ST < 2.5 ABUT >0 <90 SINGULAR REGION
   X_ST = M7i NOT PADM7_ST
   A_ST = EXT PADM7_ST X_ST < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_ST = X_ST COIN EDGE A_ST
   C_ST = M7i COIN EDGE B_ST
   (EXT C_ST M7i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
   EXT PADM7_TR < 2.5 ABUT >0 <90 SINGULAR REGION
   X_TR = M7i NOT PADM7_TR
   A_TR = EXT PADM7_TR X_TR < 2.5 ABUT >0 <90 SINGULAR REGION  
   B_TR = X_TR COIN EDGE A_TR
   C_TR = M7i COIN EDGE B_TR
   (EXT C_TR M7i < 2.5 SPACE REGION) NOT INTERACT CDUDMY
}

CB.S.2.M6.CUP { @ Space of 2 pad metals, or between pad metal and metal >= 2.5um
   EXT WBM6  < 2.5 ABUT >0 <90 SINGULAR REGION
   M6_NOWB = M6i NOT WBM6
   A = EXT WBM6 M6_NOWB < 2.5 ABUT >0 <90 SINGULAR REGION  
   B = M6_NOWB COIN EDGE A
   C = M6i COIN EDGE B
   EXT C M6i < 2.5 SPACE REGION
}
CB.S.2.M7.CUP { @ Space of 2 pad metals, or between pad metal and metal >= 2.5um
   EXT WBM7  < 2.5 ABUT >0 <90 SINGULAR REGION
   M7_NOWB = M7i NOT WBM7
   A = EXT WBM7 M7_NOWB < 2.5 ABUT >0 <90 SINGULAR REGION  
   B = M7_NOWB COIN EDGE A
   C = M7i COIN EDGE B
   EXT C M7i < 2.5 SPACE REGION
}
CB.S.2.AP.CUP { @ Space of 2 pad metals, or between AP-MD pad and AP-MD >= 2.5um
   EXT WBAP  < 2.5 ABUT >0 <90 SINGULAR REGION
   AP_NOWB = AP NOT WBAP
   A = EXT WBAP AP_NOWB < 2.5 ABUT >0 <90 SINGULAR REGION  
   B = AP_NOWB COIN EDGE A
   C = AP COIN EDGE B
   EXT C AP < 2.5 SPACE REGION
}


CB.S.3 { @ Space of different pad geometries (CB) [(Single to Stagger), (Single to Tri-tier) or (Stagger to Tri-tier)] >= 15um
  EXT CB_SINGLE CB_STAGGER < 15 ABUT <90 OPPOSITE SINGULAR REGION
  EXT CB_STAGGER CB_TRI_TIER < 15 ABUT <90 OPPOSITE SINGULAR REGION
  EXT CB_TRI_TIER CB_SINGLE  < 15 ABUT  <90 OPPOSITE SINGULAR REGION
}

//CB.P.1 can't be checked by DRC.
//CB.P.2 can't be checked by DRC.
//CB.P.3 can't be checked by DRC.
//CB.P.4 can't be checked by DRC.



// NON-CUP Pad Structure Rule
//============================
CB.R.5a.SI { @ Pad structure must be MT/VIAT...VIA1/M1
  CB_SINGLE_NON_CUP NOT INTERACT PADM1_SI
  CB_SINGLE_NON_CUP NOT INTERACT PADM2_SI
  CB_SINGLE_NON_CUP NOT INTERACT PADM3_SI
  CB_SINGLE_NON_CUP NOT INTERACT PADM4_SI
  CB_SINGLE_NON_CUP NOT INTERACT PADM5_SI
  CB_SINGLE_NON_CUP NOT INTERACT PADM6_SI
  CB_SINGLE_NON_CUP NOT INTERACT PADM7_SI
  CB_SINGLE_NON_CUP NOT ENCLOSE VIA1
  CB_SINGLE_NON_CUP NOT ENCLOSE VIA2
  CB_SINGLE_NON_CUP NOT ENCLOSE VIA3
  CB_SINGLE_NON_CUP NOT ENCLOSE VIA4
  CB_SINGLE_NON_CUP NOT ENCLOSE VIA5
  CB_SINGLE_NON_CUP NOT ENCLOSE VIA6
}
CB.R.5b.SI { @ AP-MD/Mtop pad must be solid
  CB_SINGLE_NON_CUP NOT PADM7_SI
#IFDEF with_AP
  CB_SINGLE_NON_CUP NOT AP 
#ENDIF      
}
CB.R.5c.SI { @ CB must enclose M1~M6 slot
  CB_SINGLE_NON_CUP ENCLOSE SL_SPA1_SI > 1
  CB_SINGLE_NON_CUP ENCLOSE SL_SPA2_SI > 1
  CB_SINGLE_NON_CUP ENCLOSE SL_SPA3_SI > 1
  CB_SINGLE_NON_CUP ENCLOSE SL_SPA4_SI > 1
  CB_SINGLE_NON_CUP ENCLOSE SL_SPA5_SI > 1
  CB_SINGLE_NON_CUP ENCLOSE SL_SPA6_SI > 1
  CB_SINGLE_NON_CUP NOT ENCLOSE SL_SPA1_SI
  CB_SINGLE_NON_CUP NOT ENCLOSE SL_SPA2_SI
  CB_SINGLE_NON_CUP NOT ENCLOSE SL_SPA3_SI
  CB_SINGLE_NON_CUP NOT ENCLOSE SL_SPA4_SI
  CB_SINGLE_NON_CUP NOT ENCLOSE SL_SPA5_SI
  CB_SINGLE_NON_CUP NOT ENCLOSE SL_SPA6_SI
}
CB.R.5d.SI { @ non-rectangle slot
  NOT RECTANGLE SL_M1_SI 
  NOT RECTANGLE SL_M2_SI 
  NOT RECTANGLE SL_M3_SI 
  NOT RECTANGLE SL_M4_SI 
  NOT RECTANGLE SL_M5_SI 
  NOT RECTANGLE SL_M6_SI 
}

CB.R.5a.ST { @ Pad structure must be MT/VIAT...VIA1/M1
  CB_STAGGER_NON_CUP NOT INTERACT PADM1_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM2_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM3_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM4_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM5_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM6_ST
  CB_STAGGER_NON_CUP NOT INTERACT PADM7_ST
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA1
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA2
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA3
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA4
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA5
  CB_STAGGER_NON_CUP NOT ENCLOSE VIA6
}
CB.R.5b.ST { @ AP-MD/Mtop pad must be solid
  CB_STAGGER_NON_CUP NOT PADM7_ST
#IFDEF with_AP
  CB_STAGGER_NON_CUP NOT AP 
#ENDIF 
}
CB.R.5c.ST { @ CB must enclose M1~M6 slot
  CB_STAGGER_NON_CUP ENCLOSE SL_SPA1_ST > 1
  CB_STAGGER_NON_CUP ENCLOSE SL_SPA2_ST > 1
  CB_STAGGER_NON_CUP ENCLOSE SL_SPA3_ST > 1
  CB_STAGGER_NON_CUP ENCLOSE SL_SPA4_ST > 1
  CB_STAGGER_NON_CUP ENCLOSE SL_SPA5_ST > 1
  CB_STAGGER_NON_CUP ENCLOSE SL_SPA6_ST > 1
  CB_STAGGER_NON_CUP NOT ENCLOSE SL_SPA1_ST
  CB_STAGGER_NON_CUP NOT ENCLOSE SL_SPA2_ST
  CB_STAGGER_NON_CUP NOT ENCLOSE SL_SPA3_ST
  CB_STAGGER_NON_CUP NOT ENCLOSE SL_SPA4_ST
  CB_STAGGER_NON_CUP NOT ENCLOSE SL_SPA5_ST
  CB_STAGGER_NON_CUP NOT ENCLOSE SL_SPA6_ST
}
CB.R.5d.ST { @ non-rectangle slot
  NOT RECTANGLE SL_M1_ST
  NOT RECTANGLE SL_M2_ST
  NOT RECTANGLE SL_M3_ST
  NOT RECTANGLE SL_M4_ST
  NOT RECTANGLE SL_M5_ST
  NOT RECTANGLE SL_M6_ST
}

CB.R.5a.TR { @ Pad structure must be MT/VIAT...VIA1/M1 
  X = CB_TRI_TIER_NON_CUP NOT INTERACT PADM1_TR
  X NOT INNER_CB_TR_NON_CUP
  CB_TRI_TIER_NON_CUP NOT INTERACT PADM2_TR
  CB_TRI_TIER_NON_CUP NOT INTERACT PADM3_TR
  CB_TRI_TIER_NON_CUP NOT INTERACT PADM4_TR
  CB_TRI_TIER_NON_CUP NOT INTERACT PADM5_TR
  CB_TRI_TIER_NON_CUP NOT INTERACT PADM6_TR
  CB_TRI_TIER_NON_CUP NOT INTERACT PADM7_TR
  Y = CB_TRI_TIER_NON_CUP NOT ENCLOSE VIA1
  Y NOT INNER_CB_TR_NON_CUP
  CB_TRI_TIER_NON_CUP NOT ENCLOSE VIA2
  CB_TRI_TIER_NON_CUP NOT ENCLOSE VIA3
  CB_TRI_TIER_NON_CUP NOT ENCLOSE VIA4
  CB_TRI_TIER_NON_CUP NOT ENCLOSE VIA5
  CB_TRI_TIER_NON_CUP NOT ENCLOSE VIA6
}
CB.R.5b.TR { @ AP-MD/Mtop pad must be solid
  CB_TRI_TIER_NON_CUP NOT PADM7_TR
#IFDEF with_AP
  CB_TRI_TIER_NON_CUP NOT AP 
#ENDIF 
}
CB.R.5c.TR { @ CB must enclose M1~M6 slot
  X = CB_TRI_TIER_NON_CUP ENCLOSE SL_SPA1_TR > 1
  X NOT INNER_CB_TR_NON_CUP
  CB_TRI_TIER_NON_CUP ENCLOSE SL_SPA2_TR > 1
  CB_TRI_TIER_NON_CUP ENCLOSE SL_SPA3_TR > 1
  CB_TRI_TIER_NON_CUP ENCLOSE SL_SPA4_TR > 1
  CB_TRI_TIER_NON_CUP ENCLOSE SL_SPA5_TR > 1
  CB_TRI_TIER_NON_CUP ENCLOSE SL_SPA6_TR > 1
  Y = CB_TRI_TIER_NON_CUP NOT ENCLOSE SL_SPA1_TR
  Y NOT INNER_CB_TR_NON_CUP
  CB_TRI_TIER_NON_CUP NOT ENCLOSE SL_SPA2_TR
  CB_TRI_TIER_NON_CUP NOT ENCLOSE SL_SPA3_TR
  CB_TRI_TIER_NON_CUP NOT ENCLOSE SL_SPA4_TR
  CB_TRI_TIER_NON_CUP NOT ENCLOSE SL_SPA5_TR
  CB_TRI_TIER_NON_CUP NOT ENCLOSE SL_SPA6_TR
}
CB.R.5d.TR { @ non-rectangle slot
  NOT RECTANGLE SL_M1_TR
  NOT RECTANGLE SL_M2_TR
  NOT RECTANGLE SL_M3_TR
  NOT RECTANGLE SL_M4_TR
  NOT RECTANGLE SL_M5_TR
  NOT RECTANGLE SL_M6_TR
}
CB.R.5e { @ RV interact CB/CB2 not allowed
  RV INTERACT CBx
  RV INTERACT CB2x
}
CB.R.6 {@ length of octangle pad CB 45 degree turn corners  2~3um
  s45_edge = ANGLE CB_NONCUP  == 45
  VERTEX CB_NONCUP     != 8
  LENGTH s45_edge      < 2
  LENGTH s45_edge      > 3
}
CB.R.6.M1 { @ length of octangle pad M1 degree turn corners  2~3um
  PAD_M = ((R_M1_SI OR PADH1_SI) OR (R_M1_ST OR PADH1_ST) )OR (R_M1_TR OR PADH1_TR)
  IN_M = M1 NOT PAD_M 
  BOUND =  PAD_M INSIDE EDGE M1
  PAD_M_EDGE = PAD_M TOUCH EDGE BOUND
  IN_M_EDGE = IN_M TOUCH EDGE BOUND
  PAD_M_EDGE_REMAIN = PAD_M_EDGE NOT COIN EDGE IN_M_EDGE
  PAD_M_WITH_CONNECT = (PAD_M WITH EDGE PAD_M_EDGE_REMAIN) NOT INTERACT WBDMY
  VERTEX PAD_M_WITH_CONNECT      != 8 
  s45_edge  =  ANGLE PAD_M_WITH_CONNECT  == 45
  PAD_M_WITH_CONNECT  WITH EDGE s45_edge  > 4
  PAD_M_WITH_CONNECT  WITH EDGE s45_edge  < 4
  
  LENGTH s45_edge   < 2
  LENGTH s45_edge   > 3
  IN_M_EDGE_REMAIN = IN_M_EDGE NOT COIN EDGE PAD_M_EDGE
  M_CONNECT_PAD = M1 WITH EDGE IN_M_EDGE_REMAIN
  PAD_M_WITHOUT_CONNECT = (PAD_M INTERACT M_CONNECT_PAD) NOT INTERACT WBDMY
   VERTEX PAD_M_WITHOUT_CONNECT      != 6 
   s_wo_45_edge  =  ANGLE PAD_M_WITHOUT_CONNECT  == 45
  PAD_M_WITHOUT_CONNECT WITH EDGE s_wo_45_edge  > 2
  PAD_M_WITHOUT_CONNECT WITH EDGE s_wo_45_edge  < 2
  LENGTH s_wo_45_edge   < 2
  LENGTH s_wo_45_edge   > 3
}
CB.R.6.M2 { @ length of octangle pad M2 degree turn corners  2~3um
  PAD_M = ((R_M2_SI OR PADH2_SI) OR (R_M2_ST OR PADH2_ST) )OR (R_M2_TR OR PADH2_TR)
  IN_M = M2 NOT PAD_M 
  BOUND =  PAD_M INSIDE EDGE M2
  PAD_M_EDGE = PAD_M TOUCH EDGE BOUND
  IN_M_EDGE = IN_M TOUCH EDGE BOUND
  PAD_M_EDGE_REMAIN = PAD_M_EDGE NOT COIN EDGE IN_M_EDGE
  PAD_M_WITH_CONNECT = (PAD_M WITH EDGE PAD_M_EDGE_REMAIN) NOT INTERACT WBDMY
  VERTEX PAD_M_WITH_CONNECT      != 8 
  s45_edge  =  ANGLE PAD_M_WITH_CONNECT  == 45
  PAD_M_WITH_CONNECT  WITH EDGE s45_edge  > 4
  PAD_M_WITH_CONNECT  WITH EDGE s45_edge  < 4
  
  LENGTH s45_edge   < 2
  LENGTH s45_edge   > 3
  IN_M_EDGE_REMAIN = IN_M_EDGE NOT COIN EDGE PAD_M_EDGE
  M_CONNECT_PAD = M2 WITH EDGE IN_M_EDGE_REMAIN
  PAD_M_WITHOUT_CONNECT = (PAD_M INTERACT M_CONNECT_PAD) NOT INTERACT WBDMY
   VERTEX PAD_M_WITHOUT_CONNECT      != 6 
   s_wo_45_edge  =  ANGLE PAD_M_WITHOUT_CONNECT  == 45
  PAD_M_WITHOUT_CONNECT WITH EDGE s_wo_45_edge  > 2
  PAD_M_WITHOUT_CONNECT WITH EDGE s_wo_45_edge  < 2
  LENGTH s_wo_45_edge   < 2
  LENGTH s_wo_45_edge   > 3
}
CB.R.6.M3 { @ length of octangle pad M3 degree turn corners  2~3um
  PAD_M = ((R_M3_SI OR PADH3_SI) OR (R_M3_ST OR PADH3_ST) )OR (R_M3_TR OR PADH3_TR)
  IN_M = M3 NOT PAD_M 
  BOUND =  PAD_M INSIDE EDGE M3
  PAD_M_EDGE = PAD_M TOUCH EDGE BOUND
  IN_M_EDGE = IN_M TOUCH EDGE BOUND
  PAD_M_EDGE_REMAIN = PAD_M_EDGE NOT COIN EDGE IN_M_EDGE
  PAD_M_WITH_CONNECT = (PAD_M WITH EDGE PAD_M_EDGE_REMAIN) NOT INTERACT WBDMY
  VERTEX PAD_M_WITH_CONNECT      != 8 
  s45_edge  =  ANGLE PAD_M_WITH_CONNECT  == 45
  PAD_M_WITH_CONNECT  WITH EDGE s45_edge  > 4
  PAD_M_WITH_CONNECT  WITH EDGE s45_edge  < 4
  
  LENGTH s45_edge   < 2
  LENGTH s45_edge   > 3
  IN_M_EDGE_REMAIN = IN_M_EDGE NOT COIN EDGE PAD_M_EDGE
  M_CONNECT_PAD = M3 WITH EDGE IN_M_EDGE_REMAIN
  PAD_M_WITHOUT_CONNECT = (PAD_M INTERACT M_CONNECT_PAD) NOT INTERACT WBDMY
   VERTEX PAD_M_WITHOUT_CONNECT      != 6 
   s_wo_45_edge  =  ANGLE PAD_M_WITHOUT_CONNECT  == 45
  PAD_M_WITHOUT_CONNECT WITH EDGE s_wo_45_edge  > 2
  PAD_M_WITHOUT_CONNECT WITH EDGE s_wo_45_edge  < 2
  LENGTH s_wo_45_edge   < 2
  LENGTH s_wo_45_edge   > 3
}
CB.R.6.M4 { @ length of octangle pad M4 degree turn corners  2~3um
  PAD_M = ((R_M4_SI OR PADH4_SI) OR (R_M4_ST OR PADH4_ST) )OR (R_M4_TR OR PADH4_TR)
  IN_M = M4 NOT PAD_M 
  BOUND =  PAD_M INSIDE EDGE M4
  PAD_M_EDGE = PAD_M TOUCH EDGE BOUND
  IN_M_EDGE = IN_M TOUCH EDGE BOUND
  PAD_M_EDGE_REMAIN = PAD_M_EDGE NOT COIN EDGE IN_M_EDGE
  PAD_M_WITH_CONNECT = (PAD_M WITH EDGE PAD_M_EDGE_REMAIN) NOT INTERACT WBDMY
  VERTEX PAD_M_WITH_CONNECT      != 8 
  s45_edge  =  ANGLE PAD_M_WITH_CONNECT  == 45
  PAD_M_WITH_CONNECT  WITH EDGE s45_edge  > 4
  PAD_M_WITH_CONNECT  WITH EDGE s45_edge  < 4
  
  LENGTH s45_edge   < 2
  LENGTH s45_edge   > 3
  IN_M_EDGE_REMAIN = IN_M_EDGE NOT COIN EDGE PAD_M_EDGE
  M_CONNECT_PAD = M4 WITH EDGE IN_M_EDGE_REMAIN
  PAD_M_WITHOUT_CONNECT = (PAD_M INTERACT M_CONNECT_PAD) NOT INTERACT WBDMY
   VERTEX PAD_M_WITHOUT_CONNECT      != 6 
   s_wo_45_edge  =  ANGLE PAD_M_WITHOUT_CONNECT  == 45
  PAD_M_WITHOUT_CONNECT WITH EDGE s_wo_45_edge  > 2
  PAD_M_WITHOUT_CONNECT WITH EDGE s_wo_45_edge  < 2
  LENGTH s_wo_45_edge   < 2
  LENGTH s_wo_45_edge   > 3
}
CB.R.6.M5 { @ length of octangle pad M5 degree turn corners  2~3um
  PAD_M = ((R_M5_SI OR PADH5_SI) OR (R_M5_ST OR PADH5_ST) )OR (R_M5_TR OR PADH5_TR)
  IN_M = M5 NOT PAD_M 
  BOUND =  PAD_M INSIDE EDGE M5
  PAD_M_EDGE = PAD_M TOUCH EDGE BOUND
  IN_M_EDGE = IN_M TOUCH EDGE BOUND
  PAD_M_EDGE_REMAIN = PAD_M_EDGE NOT COIN EDGE IN_M_EDGE
  PAD_M_WITH_CONNECT = (PAD_M WITH EDGE PAD_M_EDGE_REMAIN) NOT INTERACT WBDMY
  VERTEX PAD_M_WITH_CONNECT      != 8 
  s45_edge  =  ANGLE PAD_M_WITH_CONNECT  == 45
  PAD_M_WITH_CONNECT  WITH EDGE s45_edge  > 4
  PAD_M_WITH_CONNECT  WITH EDGE s45_edge  < 4
  
  LENGTH s45_edge   < 2
  LENGTH s45_edge   > 3
  IN_M_EDGE_REMAIN = IN_M_EDGE NOT COIN EDGE PAD_M_EDGE
  M_CONNECT_PAD = M5 WITH EDGE IN_M_EDGE_REMAIN
  PAD_M_WITHOUT_CONNECT = (PAD_M INTERACT M_CONNECT_PAD) NOT INTERACT WBDMY
   VERTEX PAD_M_WITHOUT_CONNECT      != 6 
   s_wo_45_edge  =  ANGLE PAD_M_WITHOUT_CONNECT  == 45
  PAD_M_WITHOUT_CONNECT WITH EDGE s_wo_45_edge  > 2
  PAD_M_WITHOUT_CONNECT WITH EDGE s_wo_45_edge  < 2
  LENGTH s_wo_45_edge   < 2
  LENGTH s_wo_45_edge   > 3
}
CB.R.6.M6 { @ length of octangle pad M6 degree turn corners  2~3um
  PAD_M = ((R_M6_SI OR PADH6_SI) OR (R_M6_ST OR PADH6_ST) )OR (R_M6_TR OR PADH6_TR)
  IN_M = M6 NOT PAD_M 
  BOUND =  PAD_M INSIDE EDGE M6
  PAD_M_EDGE = PAD_M TOUCH EDGE BOUND
  IN_M_EDGE = IN_M TOUCH EDGE BOUND
  PAD_M_EDGE_REMAIN = PAD_M_EDGE NOT COIN EDGE IN_M_EDGE
  PAD_M_WITH_CONNECT = (PAD_M WITH EDGE PAD_M_EDGE_REMAIN) NOT INTERACT WBDMY
  VERTEX PAD_M_WITH_CONNECT      != 8 
  s45_edge  =  ANGLE PAD_M_WITH_CONNECT  == 45
  PAD_M_WITH_CONNECT  WITH EDGE s45_edge  > 4
  PAD_M_WITH_CONNECT  WITH EDGE s45_edge  < 4
  
  LENGTH s45_edge   < 2
  LENGTH s45_edge   > 3
  IN_M_EDGE_REMAIN = IN_M_EDGE NOT COIN EDGE PAD_M_EDGE
  M_CONNECT_PAD = M6 WITH EDGE IN_M_EDGE_REMAIN
  PAD_M_WITHOUT_CONNECT = (PAD_M INTERACT M_CONNECT_PAD) NOT INTERACT WBDMY
   VERTEX PAD_M_WITHOUT_CONNECT      != 6 
   s_wo_45_edge  =  ANGLE PAD_M_WITHOUT_CONNECT  == 45
  PAD_M_WITHOUT_CONNECT WITH EDGE s_wo_45_edge  > 2
  PAD_M_WITHOUT_CONNECT WITH EDGE s_wo_45_edge  < 2
  LENGTH s_wo_45_edge   < 2
  LENGTH s_wo_45_edge   > 3
}
CB.R.6.M7 { @ length of octangle pad MT 45 degree turn corners  2~3um
  PAD_M = (PADM7_SI OR PADM7_ST) OR PADM7_TR
  IN_M = M7 NOT PAD_M 
  BOUND =  PAD_M INSIDE EDGE M7
  PAD_M_EDGE = PAD_M TOUCH EDGE BOUND
  IN_M_EDGE = IN_M TOUCH EDGE BOUND
  PAD_M_EDGE_REMAIN = PAD_M_EDGE NOT COIN EDGE IN_M_EDGE
  PAD_M_WITH_CONNECT = (PAD_M WITH EDGE PAD_M_EDGE_REMAIN) NOT INTERACT WBDMY 
  VERTEX PAD_M_WITH_CONNECT      != 8
  s45_edge  = ANGLE PAD_M_WITH_CONNECT  == 45 
  PAD_M_WITH_CONNECT WITH EDGE s45_edge > 4
  PAD_M_WITH_CONNECT WITH EDGE s45_edge < 4
  
  LENGTH s45_edge   < 2
  LENGTH s45_edge   > 3
  IN_M_EDGE_REMAIN = IN_M_EDGE NOT COIN EDGE PAD_M_EDGE
  M_CONNECT_PAD = M7 WITH EDGE IN_M_EDGE_REMAIN
  PAD_M_WITHOUT_CONNECT = (PAD_M INTERACT M_CONNECT_PAD ) NOT INTERACT WBDMY
  VERTEX PAD_M_WITHOUT_CONNECT      != 6 
  s_wo_45_edge  = ANGLE PAD_M_WITHOUT_CONNECT  == 45
  PAD_M_WITHOUT_CONNECT WITH EDGE s_wo_45_edge > 2
  PAD_M_WITHOUT_CONNECT WITH EDGE s_wo_45_edge < 2
  
  LENGTH s_wo_45_edge   < 2
  LENGTH s_wo_45_edge   > 3
}







VARIABLE CBMx_W_2 1.5
CBVIA1.W.2 { @ VIA1 width = 0.1um
  NOT RECTANGLE PAD_VIA1_SI_NON_CUP == 0.1 BY == 0.1 ORTHOGONAL ONLY
  NOT RECTANGLE PAD_VIA1_ST_NON_CUP == 0.1 BY == 0.1 ORTHOGONAL ONLY
  NOT RECTANGLE PAD_VIA1_TR_NON_CUP == 0.1 BY == 0.1 ORTHOGONAL ONLY      
}
CBVIA1.S.3 { @ pad VIA1 space >= 0.14um
  EXT PAD_VIA1_SI_NON_CUP < 0.14 ABUT < 90 SINGULAR REGION
  EXT PAD_VIA1_ST_NON_CUP < 0.14 ABUT < 90 SINGULAR REGION
  EXT PAD_VIA1_TR_NON_CUP < 0.14 ABUT < 90 SINGULAR REGION
}
CBVIA1.EN.4 { @ pad VIA1 enclosure by M1/M2 >= 0.05um
  ENC PAD_VIA1_SI_NON_CUP M1 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA1_SI_NON_CUP NOT M1
  ENC PAD_VIA1_SI_NON_CUP M2 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA1_SI_NON_CUP NOT M2
  ENC PAD_VIA1_ST_NON_CUP M1 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA1_ST_NON_CUP NOT M1
  ENC PAD_VIA1_ST_NON_CUP M2 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA1_ST_NON_CUP NOT M2
  ENC PAD_VIA1_TR_NON_CUP M1 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA1_TR_NON_CUP NOT M1
  ENC PAD_VIA1_TR_NON_CUP M2 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA1_TR_NON_CUP NOT M2
}
CBVIA1.R.4 { @ VIA1 number at each square metal crossing region >= 36
  SQUARE_C_M12_SI = RECTANGLE C_M12_SI == CBMx_W_2 BY == CBMx_W_2 ORTHOGONAL ONLY
  SQUARE_C_M12_ST = RECTANGLE C_M12_ST == CBMx_W_2 BY == CBMx_W_2 ORTHOGONAL ONLY
  SQUARE_C_M12_TR = RECTANGLE C_M12_TR == CBMx_W_2 BY == CBMx_W_2 ORTHOGONAL ONLY
  SQUARE_C_M12_SI ENCLOSE PAD_VIA1_SI < 36
  SQUARE_C_M12_SI NOT ENCLOSE PAD_VIA1_SI_NON_CUP
  SQUARE_C_M12_ST ENCLOSE PAD_VIA1_ST < 36
  SQUARE_C_M12_ST NOT ENCLOSE PAD_VIA1_ST_NON_CUP  
  SQUARE_C_M12_TR ENCLOSE PAD_VIA1_TR < 36
  SQUARE_C_M12_TR NOT ENCLOSE PAD_VIA1_TR_NON_CUP
}
CBVIA2.W.2 { @ VIA2 width = 0.1um
  NOT RECTANGLE PAD_VIA2_SI_NON_CUP == 0.1 BY == 0.1 ORTHOGONAL ONLY
  NOT RECTANGLE PAD_VIA2_ST_NON_CUP == 0.1 BY == 0.1 ORTHOGONAL ONLY
  NOT RECTANGLE PAD_VIA2_TR_NON_CUP == 0.1 BY == 0.1 ORTHOGONAL ONLY      
}
CBVIA2.S.3 { @ pad VIA2 space >= 0.14um
  EXT PAD_VIA2_SI_NON_CUP < 0.14 ABUT < 90 SINGULAR REGION
  EXT PAD_VIA2_ST_NON_CUP < 0.14 ABUT < 90 SINGULAR REGION
  EXT PAD_VIA2_TR_NON_CUP < 0.14 ABUT < 90 SINGULAR REGION
}
CBVIA2.EN.4 { @ pad VIA2 enclosure by M2/M3 >= 0.05um
  ENC PAD_VIA2_SI_NON_CUP M2 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA2_SI_NON_CUP NOT M2
  ENC PAD_VIA2_SI_NON_CUP M3 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA2_SI_NON_CUP NOT M3
  ENC PAD_VIA2_ST_NON_CUP M2 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA2_ST_NON_CUP NOT M2
  ENC PAD_VIA2_ST_NON_CUP M3 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA2_ST_NON_CUP NOT M3
  ENC PAD_VIA2_TR_NON_CUP M2 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA2_TR_NON_CUP NOT M2
  ENC PAD_VIA2_TR_NON_CUP M3 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA2_TR_NON_CUP NOT M3
}
CBVIA2.R.4 { @ VIA2 number at each square metal crossing region >= 36
  SQUARE_C_M23_SI = RECTANGLE C_M23_SI == CBMx_W_2 BY == CBMx_W_2 ORTHOGONAL ONLY
  SQUARE_C_M23_ST = RECTANGLE C_M23_ST == CBMx_W_2 BY == CBMx_W_2 ORTHOGONAL ONLY
  SQUARE_C_M23_TR = RECTANGLE C_M23_TR == CBMx_W_2 BY == CBMx_W_2 ORTHOGONAL ONLY
  SQUARE_C_M23_SI ENCLOSE PAD_VIA2_SI < 36
  SQUARE_C_M23_SI NOT ENCLOSE PAD_VIA2_SI_NON_CUP
  SQUARE_C_M23_ST ENCLOSE PAD_VIA2_ST < 36
  SQUARE_C_M23_ST NOT ENCLOSE PAD_VIA2_ST_NON_CUP  
  SQUARE_C_M23_TR ENCLOSE PAD_VIA2_TR < 36
  SQUARE_C_M23_TR NOT ENCLOSE PAD_VIA2_TR_NON_CUP
}
CBVIA3.W.2 { @ VIA3 width = 0.1um
  NOT RECTANGLE PAD_VIA3_SI_NON_CUP == 0.1 BY == 0.1 ORTHOGONAL ONLY
  NOT RECTANGLE PAD_VIA3_ST_NON_CUP == 0.1 BY == 0.1 ORTHOGONAL ONLY
  NOT RECTANGLE PAD_VIA3_TR_NON_CUP == 0.1 BY == 0.1 ORTHOGONAL ONLY      
}
CBVIA3.S.3 { @ pad VIA3 space >= 0.14um
  EXT PAD_VIA3_SI_NON_CUP < 0.14 ABUT < 90 SINGULAR REGION
  EXT PAD_VIA3_ST_NON_CUP < 0.14 ABUT < 90 SINGULAR REGION
  EXT PAD_VIA3_TR_NON_CUP < 0.14 ABUT < 90 SINGULAR REGION
}
CBVIA3.EN.4 { @ pad VIA3 enclosure by M3/M4 >= 0.05um
  ENC PAD_VIA3_SI_NON_CUP M3 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA3_SI_NON_CUP NOT M3
  ENC PAD_VIA3_SI_NON_CUP M4 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA3_SI_NON_CUP NOT M4
  ENC PAD_VIA3_ST_NON_CUP M3 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA3_ST_NON_CUP NOT M3
  ENC PAD_VIA3_ST_NON_CUP M4 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA3_ST_NON_CUP NOT M4
  ENC PAD_VIA3_TR_NON_CUP M3 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA3_TR_NON_CUP NOT M3
  ENC PAD_VIA3_TR_NON_CUP M4 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA3_TR_NON_CUP NOT M4
}
CBVIA3.R.4 { @ VIA3 number at each square metal crossing region >= 36
  SQUARE_C_M34_SI = RECTANGLE C_M34_SI == CBMx_W_2 BY == CBMx_W_2 ORTHOGONAL ONLY
  SQUARE_C_M34_ST = RECTANGLE C_M34_ST == CBMx_W_2 BY == CBMx_W_2 ORTHOGONAL ONLY
  SQUARE_C_M34_TR = RECTANGLE C_M34_TR == CBMx_W_2 BY == CBMx_W_2 ORTHOGONAL ONLY
  SQUARE_C_M34_SI ENCLOSE PAD_VIA3_SI < 36
  SQUARE_C_M34_SI NOT ENCLOSE PAD_VIA3_SI_NON_CUP
  SQUARE_C_M34_ST ENCLOSE PAD_VIA3_ST < 36
  SQUARE_C_M34_ST NOT ENCLOSE PAD_VIA3_ST_NON_CUP  
  SQUARE_C_M34_TR ENCLOSE PAD_VIA3_TR < 36
  SQUARE_C_M34_TR NOT ENCLOSE PAD_VIA3_TR_NON_CUP
}
CBVIA4.W.2 { @ VIA4 width = 0.1um
  NOT RECTANGLE PAD_VIA4_SI_NON_CUP == 0.1 BY == 0.1 ORTHOGONAL ONLY
  NOT RECTANGLE PAD_VIA4_ST_NON_CUP == 0.1 BY == 0.1 ORTHOGONAL ONLY
  NOT RECTANGLE PAD_VIA4_TR_NON_CUP == 0.1 BY == 0.1 ORTHOGONAL ONLY      
}
CBVIA4.S.3 { @ pad VIA4 space >= 0.14um
  EXT PAD_VIA4_SI_NON_CUP < 0.14 ABUT < 90 SINGULAR REGION
  EXT PAD_VIA4_ST_NON_CUP < 0.14 ABUT < 90 SINGULAR REGION
  EXT PAD_VIA4_TR_NON_CUP < 0.14 ABUT < 90 SINGULAR REGION
}
CBVIA4.EN.4 { @ pad VIA4 enclosure by M4/M5 >= 0.05um
  ENC PAD_VIA4_SI_NON_CUP M4 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA4_SI_NON_CUP NOT M4
  ENC PAD_VIA4_SI_NON_CUP M5 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA4_SI_NON_CUP NOT M5
  ENC PAD_VIA4_ST_NON_CUP M4 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA4_ST_NON_CUP NOT M4
  ENC PAD_VIA4_ST_NON_CUP M5 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA4_ST_NON_CUP NOT M5
  ENC PAD_VIA4_TR_NON_CUP M4 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA4_TR_NON_CUP NOT M4
  ENC PAD_VIA4_TR_NON_CUP M5 < 0.05 ABUT < 90 SINGULAR REGION
  PAD_VIA4_TR_NON_CUP NOT M5
}
CBVIA4.R.4 { @ VIA4 number at each square metal crossing region >= 36
  SQUARE_C_M45_SI = RECTANGLE C_M45_SI == CBMx_W_2 BY == CBMx_W_2 ORTHOGONAL ONLY
  SQUARE_C_M45_ST = RECTANGLE C_M45_ST == CBMx_W_2 BY == CBMx_W_2 ORTHOGONAL ONLY
  SQUARE_C_M45_TR = RECTANGLE C_M45_TR == CBMx_W_2 BY == CBMx_W_2 ORTHOGONAL ONLY
  SQUARE_C_M45_SI ENCLOSE PAD_VIA4_SI < 36
  SQUARE_C_M45_SI NOT ENCLOSE PAD_VIA4_SI_NON_CUP
  SQUARE_C_M45_ST ENCLOSE PAD_VIA4_ST < 36
  SQUARE_C_M45_ST NOT ENCLOSE PAD_VIA4_ST_NON_CUP  
  SQUARE_C_M45_TR ENCLOSE PAD_VIA4_TR < 36
  SQUARE_C_M45_TR NOT ENCLOSE PAD_VIA4_TR_NON_CUP
}
CBVIA5.W.2 { @ VIA5 width = 0.36um
  NOT RECTANGLE PAD_VIA5_SI_NON_CUP == 0.36 BY == 0.36 ORTHOGONAL ONLY
  NOT RECTANGLE PAD_VIA5_ST_NON_CUP == 0.36 BY == 0.36 ORTHOGONAL ONLY
  NOT RECTANGLE PAD_VIA5_TR_NON_CUP == 0.36 BY == 0.36 ORTHOGONAL ONLY      
}
CBVIA5.EN.2 { @ pad VIA5 enclosure by M5/M6 >= 0.12um
  ENC PAD_VIA5_SI_NON_CUP M5 < 0.12 ABUT < 90 SINGULAR REGION
  PAD_VIA5_SI_NON_CUP NOT M5
  ENC PAD_VIA5_SI_NON_CUP M6 < 0.12 ABUT < 90 SINGULAR REGION
  PAD_VIA5_SI_NON_CUP NOT M6
  ENC PAD_VIA5_ST_NON_CUP M5 < 0.12 ABUT < 90 SINGULAR REGION
  PAD_VIA5_ST_NON_CUP NOT M5
  ENC PAD_VIA5_ST_NON_CUP M6 < 0.12 ABUT < 90 SINGULAR REGION
  PAD_VIA5_ST_NON_CUP NOT M6
  ENC PAD_VIA5_TR_NON_CUP M5 < 0.12 ABUT < 90 SINGULAR REGION
  PAD_VIA5_TR_NON_CUP NOT M5
  ENC PAD_VIA5_TR_NON_CUP M6 < 0.12 ABUT < 90 SINGULAR REGION
  PAD_VIA5_TR_NON_CUP NOT M6
}
CBVIA5.S.3 { @ pad VIA5 space >= 0.54um
  EXT PAD_VIA5_SI_NON_CUP < 0.54 ABUT < 90 SINGULAR REGION
  EXT PAD_VIA5_ST_NON_CUP < 0.54 ABUT < 90 SINGULAR REGION
  EXT PAD_VIA5_TR_NON_CUP < 0.54 ABUT < 90 SINGULAR REGION
}
CBVIA5.R.4 { @ VIA5 number at each metal crossing >= 4
  SQUARE_C_M56_SI = RECTANGLE C_M56_SI == CBMx_W_2 BY == CBMx_W_2 ORTHOGONAL ONLY
  SQUARE_C_M56_ST = RECTANGLE C_M56_ST == CBMx_W_2 BY == CBMx_W_2 ORTHOGONAL ONLY
  SQUARE_C_M56_TR = RECTANGLE C_M56_TR == CBMx_W_2 BY == CBMx_W_2 ORTHOGONAL ONLY

  SQUARE_C_M56_SI ENCLOSE PAD_VIA5_SI_NON_CUP < 4
  SQUARE_C_M56_SI NOT ENCLOSE PAD_VIA5_SI_NON_CUP
  SQUARE_C_M56_ST ENCLOSE PAD_VIA5_ST_NON_CUP < 4
  SQUARE_C_M56_ST NOT ENCLOSE PAD_VIA5_ST_NON_CUP
  SQUARE_C_M56_TR ENCLOSE PAD_VIA5_TR_NON_CUP < 4
  SQUARE_C_M56_TR NOT ENCLOSE PAD_VIA5_TR_NON_CUP
}

CBVIA6.W.2 { @ VIA6 width = 0.36um
  NOT RECTANGLE PAD_VIA6_SI_NON_CUP == 0.36 BY == 0.36 ORTHOGONAL ONLY
  NOT RECTANGLE PAD_VIA6_ST_NON_CUP == 0.36 BY == 0.36 ORTHOGONAL ONLY
  NOT RECTANGLE PAD_VIA6_TR_NON_CUP == 0.36 BY == 0.36 ORTHOGONAL ONLY      
}
CBVIA6.EN.2 { @ pad VIA6 enclosure by M6/M7 >= 0.12um
  ENC PAD_VIA6_SI_NON_CUP M6 < 0.12 ABUT < 90 SINGULAR REGION
  PAD_VIA6_SI_NON_CUP NOT M6
  ENC PAD_VIA6_SI_NON_CUP M7 < 0.12 ABUT < 90 SINGULAR REGION
  PAD_VIA6_SI_NON_CUP NOT M7
  ENC PAD_VIA6_ST_NON_CUP M6 < 0.12 ABUT < 90 SINGULAR REGION
  PAD_VIA6_ST_NON_CUP NOT M6
  ENC PAD_VIA6_ST_NON_CUP M7 < 0.12 ABUT < 90 SINGULAR REGION
  PAD_VIA6_ST_NON_CUP NOT M7
  ENC PAD_VIA6_TR_NON_CUP M6 < 0.12 ABUT < 90 SINGULAR REGION
  PAD_VIA6_TR_NON_CUP NOT M6
  ENC PAD_VIA6_TR_NON_CUP M7 < 0.12 ABUT < 90 SINGULAR REGION
  PAD_VIA6_TR_NON_CUP NOT M7
}
CBVIA6.S.3 { @ pad VIA6 space >= 0.54um
  EXT PAD_VIA6_SI_NON_CUP < 0.54 ABUT < 90 SINGULAR REGION
  EXT PAD_VIA6_ST_NON_CUP < 0.54 ABUT < 90 SINGULAR REGION
  EXT PAD_VIA6_TR_NON_CUP < 0.54 ABUT < 90 SINGULAR REGION
}
CBVIA6.R.4 { @ VIA6 number at each metal crossing >= 4
  SQUARE_C_M56_SI = RECTANGLE C_M56_SI == CBMx_W_2 BY == CBMx_W_2 ORTHOGONAL ONLY
  SQUARE_C_M56_ST = RECTANGLE C_M56_ST == CBMx_W_2 BY == CBMx_W_2 ORTHOGONAL ONLY
  SQUARE_C_M56_TR = RECTANGLE C_M56_TR == CBMx_W_2 BY == CBMx_W_2 ORTHOGONAL ONLY
  
  X_SI = SQUARE_C_M56_SI AND M7
  X_SI ENCLOSE PAD_VIA6_SI_NON_CUP < 4
  X_SI NOT ENCLOSE PAD_VIA6_SI_NON_CUP
  
  X_ST = SQUARE_C_M56_ST AND M7
  X_ST ENCLOSE PAD_VIA6_ST_NON_CUP < 4
  X_ST NOT ENCLOSE PAD_VIA6_ST_NON_CUP
  
  X_TR = SQUARE_C_M56_TR AND M7
  X_TR ENCLOSE PAD_VIA6_TR_NON_CUP < 4
  X_TR NOT ENCLOSE PAD_VIA6_TR_NON_CUP
}











CONNECT PAD_VIA1_SI CB_SINGLE_NON_CUP
CONNECT PAD_VIA1_ST_OUTER OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA1_TR_OUTER OUTER_CB_TR_NON_CUP
CONNECT PAD_VIA1_ST_INNER INNER_CB_ST_NON_CUP 
CONNECT PAD_VIA1_TR_INNER INNER_CB_TR_NON_CUP
CONNECT PAD_VIA1_TR_MID MID_CB_TR_NON_CUP

CONNECT PAD_VIA2_SI CB_SINGLE_NON_CUP
CONNECT PAD_VIA2_ST_OUTER OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA2_TR_OUTER OUTER_CB_TR_NON_CUP
CONNECT PAD_VIA2_ST_INNER INNER_CB_ST_NON_CUP 
CONNECT PAD_VIA2_TR_INNER INNER_CB_TR_NON_CUP
CONNECT PAD_VIA2_TR_MID MID_CB_TR_NON_CUP

CONNECT PAD_VIA3_SI CB_SINGLE_NON_CUP
CONNECT PAD_VIA3_ST_OUTER OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA3_TR_OUTER OUTER_CB_TR_NON_CUP
CONNECT PAD_VIA3_ST_INNER INNER_CB_ST_NON_CUP 
CONNECT PAD_VIA3_TR_INNER INNER_CB_TR_NON_CUP
CONNECT PAD_VIA3_TR_MID MID_CB_TR_NON_CUP

CONNECT PAD_VIA4_SI CB_SINGLE_NON_CUP
CONNECT PAD_VIA4_ST_OUTER OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA4_TR_OUTER OUTER_CB_TR_NON_CUP
CONNECT PAD_VIA4_ST_INNER INNER_CB_ST_NON_CUP 
CONNECT PAD_VIA4_TR_INNER INNER_CB_TR_NON_CUP
CONNECT PAD_VIA4_TR_MID MID_CB_TR_NON_CUP

CONNECT PAD_VIA5_SI CB_SINGLE_NON_CUP
CONNECT PAD_VIA5_ST_OUTER OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA5_TR_OUTER OUTER_CB_TR_NON_CUP
CONNECT PAD_VIA5_ST_INNER INNER_CB_ST_NON_CUP 
CONNECT PAD_VIA5_TR_INNER INNER_CB_TR_NON_CUP
CONNECT PAD_VIA5_TR_MID MID_CB_TR_NON_CUP

CONNECT PAD_VIA6_SI CB_SINGLE_NON_CUP
CONNECT PAD_VIA6_ST_OUTER OUTER_CB_ST_NON_CUP
CONNECT PAD_VIA6_TR_OUTER OUTER_CB_TR_NON_CUP
CONNECT PAD_VIA6_ST_INNER INNER_CB_ST_NON_CUP 
CONNECT PAD_VIA6_TR_INNER INNER_CB_TR_NON_CUP
CONNECT PAD_VIA6_TR_MID MID_CB_TR_NON_CUP



CBVIA1.R.3.OUTER { @ ratio of outer VIA1 to CB >= 0.03
   NET AREA RATIO CB_SINGLE_NON_CUP PAD_VIA1_SI < 0.03
  [AREA(PAD_VIA1_SI)/AREA(CB_SINGLE_NON_CUP)
  ] RDB via1_single_ratio.log CB_SINGLE_NON_CUP PAD_VIA1_SI
   NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA1_ST_OUTER < 0.03
  [AREA(PAD_VIA1_ST_OUTER)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via1_stagger_outer_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA1_ST_OUTER
   NET AREA RATIO OUTER_CB_TR_NON_CUP PAD_VIA1_TR_OUTER < 0.03
  [AREA(PAD_VIA1_TR_OUTER)/AREA(OUTER_CB_TR_NON_CUP)
  ] RDB via1_tri_tier_outer_ratio.log OUTER_CB_TR_NON_CUP PAD_VIA1_TR_OUTER
}
CBVIA1.R.3.1 { @ ratio of middle/inner VIA1 to CB >= 0.02
   NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA1_ST_INNER < 0.02
  [AREA(PAD_VIA1_ST_INNER)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via1_stagger_inner_ratio.log  INNER_CB_ST_NON_CUP PAD_VIA1_ST_INNER
   NET AREA RATIO MID_CB_TR_NON_CUP PAD_VIA1_TR_MID < 0.02
  [AREA(PAD_VIA1_TR_MID)/AREA(MID_CB_TR_NON_CUP)
  ] RDB via1_tri_tier_mid_ratio.log  MID_CB_TR_NON_CUP PAD_VIA1_TR_MID
}

CBVIA2.R.3.OUTER { @ ratio of outer VIA2 to CB >= 0.03
   NET AREA RATIO CB_SINGLE_NON_CUP PAD_VIA2_SI < 0.03
  [AREA(PAD_VIA2_SI)/AREA(CB_SINGLE_NON_CUP)
  ] RDB via2_single_ratio.log CB_SINGLE_NON_CUP PAD_VIA2_SI
   NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA2_ST_OUTER < 0.03
  [AREA(PAD_VIA2_ST_OUTER)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via2_stagger_outer_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA2_ST_OUTER
   NET AREA RATIO OUTER_CB_TR_NON_CUP PAD_VIA2_TR_OUTER < 0.03
  [AREA(PAD_VIA2_TR_OUTER)/AREA(OUTER_CB_TR_NON_CUP)
  ] RDB via2_tri_tier_outer_ratio.log OUTER_CB_TR_NON_CUP PAD_VIA2_TR_OUTER
}
CBVIA2.R.3.1 { @ ratio of middle/inner VIA2 to CB >= 0.02
   NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA2_ST_INNER < 0.02
  [AREA(PAD_VIA2_ST_INNER)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via2_stagger_inner_ratio.log  INNER_CB_ST_NON_CUP PAD_VIA2_ST_INNER
   NET AREA RATIO INNER_CB_TR_NON_CUP PAD_VIA2_TR_INNER < 0.02
  [AREA(PAD_VIA2_TR_INNER)/AREA(INNER_CB_TR_NON_CUP)
  ] RDB via2_tri_tier_inner_ratio.log  INNER_CB_TR_NON_CUP PAD_VIA2_TR_INNER
   NET AREA RATIO MID_CB_TR_NON_CUP PAD_VIA2_TR_MID < 0.02
  [AREA(PAD_VIA2_TR_MID)/AREA(MID_CB_TR_NON_CUP)
  ] RDB via2_tri_tier_mid_ratio.log  MID_CB_TR_NON_CUP PAD_VIA2_TR_MID
}

CBVIA3.R.3.OUTER { @ ratio of outer VIA3 to CB >= 0.03
   NET AREA RATIO CB_SINGLE_NON_CUP PAD_VIA3_SI < 0.03
  [AREA(PAD_VIA3_SI)/AREA(CB_SINGLE_NON_CUP)
  ] RDB via3_single_ratio.log CB_SINGLE_NON_CUP PAD_VIA3_SI
   NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA3_ST_OUTER < 0.03
  [AREA(PAD_VIA3_ST_OUTER)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via3_stagger_outer_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA3_ST_OUTER
   NET AREA RATIO OUTER_CB_TR_NON_CUP PAD_VIA3_TR_OUTER < 0.03
  [AREA(PAD_VIA3_TR_OUTER)/AREA(OUTER_CB_TR_NON_CUP)
  ] RDB via3_tri_tier_outer_ratio.log OUTER_CB_TR_NON_CUP PAD_VIA3_TR_OUTER
}
CBVIA3.R.3.1 { @ ratio of middle/inner VIA3 to CB >= 0.02
   NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA3_ST_INNER < 0.02
  [AREA(PAD_VIA3_ST_INNER)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via3_stagger_inner_ratio.log  INNER_CB_ST_NON_CUP PAD_VIA3_ST_INNER
   NET AREA RATIO INNER_CB_TR_NON_CUP PAD_VIA3_TR_INNER < 0.02
  [AREA(PAD_VIA3_TR_INNER)/AREA(INNER_CB_TR_NON_CUP)
  ] RDB via3_tri_tier_inner_ratio.log  INNER_CB_TR_NON_CUP PAD_VIA3_TR_INNER
   NET AREA RATIO MID_CB_TR_NON_CUP PAD_VIA3_TR_MID < 0.02
  [AREA(PAD_VIA3_TR_MID)/AREA(MID_CB_TR_NON_CUP)
  ] RDB via3_tri_tier_mid_ratio.log  MID_CB_TR_NON_CUP PAD_VIA3_TR_MID
}

CBVIA4.R.3.OUTER { @ ratio of outer VIA4 to CB >= 0.03
   NET AREA RATIO CB_SINGLE_NON_CUP PAD_VIA4_SI < 0.03
  [AREA(PAD_VIA4_SI)/AREA(CB_SINGLE_NON_CUP)
  ] RDB via4_single_ratio.log CB_SINGLE_NON_CUP PAD_VIA4_SI
   NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA4_ST_OUTER < 0.03
  [AREA(PAD_VIA4_ST_OUTER)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via4_stagger_outer_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA4_ST_OUTER
   NET AREA RATIO OUTER_CB_TR_NON_CUP PAD_VIA4_TR_OUTER < 0.03
  [AREA(PAD_VIA4_TR_OUTER)/AREA(OUTER_CB_TR_NON_CUP)
  ] RDB via4_tri_tier_outer_ratio.log OUTER_CB_TR_NON_CUP PAD_VIA4_TR_OUTER
}
CBVIA4.R.3.1 { @ ratio of middle/inner VIA4 to CB >= 0.02
   NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA4_ST_INNER < 0.02
  [AREA(PAD_VIA4_ST_INNER)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via4_stagger_inner_ratio.log  INNER_CB_ST_NON_CUP PAD_VIA4_ST_INNER
   NET AREA RATIO INNER_CB_TR_NON_CUP PAD_VIA4_TR_INNER < 0.02
  [AREA(PAD_VIA4_TR_INNER)/AREA(INNER_CB_TR_NON_CUP)
  ] RDB via4_tri_tier_inner_ratio.log  INNER_CB_TR_NON_CUP PAD_VIA4_TR_INNER
   NET AREA RATIO MID_CB_TR_NON_CUP PAD_VIA4_TR_MID < 0.02
  [AREA(PAD_VIA4_TR_MID)/AREA(MID_CB_TR_NON_CUP)
  ] RDB via4_tri_tier_mid_ratio.log  MID_CB_TR_NON_CUP PAD_VIA4_TR_MID
}

CBVIA5.R.3.OUTER { @ ratio of outer VIA5 to CB >= 0.03
   NET AREA RATIO CB_SINGLE_NON_CUP PAD_VIA5_SI < 0.03
  [AREA(PAD_VIA5_SI)/AREA(CB_SINGLE_NON_CUP)
  ] RDB via5_single_ratio.log CB_SINGLE_NON_CUP PAD_VIA5_SI
   NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA5_ST_OUTER < 0.03
  [AREA(PAD_VIA5_ST_OUTER)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via5_stagger_outer_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA5_ST_OUTER
   NET AREA RATIO OUTER_CB_TR_NON_CUP PAD_VIA5_TR_OUTER < 0.03
  [AREA(PAD_VIA5_TR_OUTER)/AREA(OUTER_CB_TR_NON_CUP)
  ] RDB via5_tri_tier_outer_ratio.log OUTER_CB_TR_NON_CUP PAD_VIA5_TR_OUTER
}
CBVIA5.R.3.MID.INNER { @ ratio of middle/inner VIA5 to CB >= 0.03
   NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA5_ST_INNER < 0.03
  [AREA(PAD_VIA5_ST_INNER)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via5_stagger_inner_ratio.log  INNER_CB_ST_NON_CUP PAD_VIA5_ST_INNER
   NET AREA RATIO INNER_CB_TR_NON_CUP PAD_VIA5_TR_INNER < 0.03
  [AREA(PAD_VIA5_TR_INNER)/AREA(INNER_CB_TR_NON_CUP)
  ] RDB via5_tri_tier_inner_ratio.log  INNER_CB_TR_NON_CUP PAD_VIA5_TR_INNER
   NET AREA RATIO MID_CB_TR_NON_CUP PAD_VIA5_TR_MID < 0.03
  [AREA(PAD_VIA5_TR_MID)/AREA(MID_CB_TR_NON_CUP)
  ] RDB via5_tri_tier_mid_ratio.log  MID_CB_TR_NON_CUP PAD_VIA5_TR_MID
}

CBVIA6.R.3.OUTER { @ ratio of outer VIA6 to CB >= 0.03
   NET AREA RATIO CB_SINGLE_NON_CUP PAD_VIA6_SI < 0.03
  [AREA(PAD_VIA6_SI)/AREA(CB_SINGLE_NON_CUP)
  ] RDB via6_single_ratio.log CB_SINGLE_NON_CUP PAD_VIA6_SI
   NET AREA RATIO OUTER_CB_ST_NON_CUP PAD_VIA6_ST_OUTER < 0.03
  [AREA(PAD_VIA6_ST_OUTER)/AREA(OUTER_CB_ST_NON_CUP)
  ] RDB via6_stagger_outer_ratio.log OUTER_CB_ST_NON_CUP PAD_VIA6_ST_OUTER
   NET AREA RATIO OUTER_CB_TR_NON_CUP PAD_VIA6_TR_OUTER < 0.03
  [AREA(PAD_VIA6_TR_OUTER)/AREA(OUTER_CB_TR_NON_CUP)
  ] RDB via6_tri_tier_outer_ratio.log OUTER_CB_TR_NON_CUP PAD_VIA6_TR_OUTER
}
CBVIA6.R.3.MID.INNER { @ ratio of middle/inner VIA6 to CB >= 0.03
   NET AREA RATIO INNER_CB_ST_NON_CUP PAD_VIA6_ST_INNER < 0.03
  [AREA(PAD_VIA6_ST_INNER)/AREA(INNER_CB_ST_NON_CUP)
  ] RDB via6_stagger_inner_ratio.log  INNER_CB_ST_NON_CUP PAD_VIA6_ST_INNER
   NET AREA RATIO INNER_CB_TR_NON_CUP PAD_VIA6_TR_INNER < 0.03
  [AREA(PAD_VIA6_TR_INNER)/AREA(INNER_CB_TR_NON_CUP)
  ] RDB via6_tri_tier_inner_ratio.log  INNER_CB_TR_NON_CUP PAD_VIA6_TR_INNER
   NET AREA RATIO MID_CB_TR_NON_CUP PAD_VIA6_TR_MID < 0.03
  [AREA(PAD_VIA6_TR_MID)/AREA(MID_CB_TR_NON_CUP)
  ] RDB via6_tri_tier_mid_ratio.log  MID_CB_TR_NON_CUP PAD_VIA6_TR_MID
}


CBM1.W.2 { @ metal width in pad = 1.5um
  (INT L_M1_SI < 1.5 ABUT < 90 REGION) NOT INTERACT WBDMY
  (SIZE L_M1_SI BY 0.75 UNDEROVER )    NOT INTERACT WBDMY
  (INT L_M1_ST < 1.5 ABUT < 90 REGION) NOT INTERACT WBDMY 
  (SIZE L_M1_ST BY 0.75 UNDEROVER)     NOT INTERACT WBDMY 
  (INT L_M1_TR < 1.5 ABUT < 90 REGION) NOT INTERACT WBDMY
  (SIZE L_M1_TR BY 0.75 UNDEROVER )    NOT INTERACT WBDMY
}             
CBM2.W.2 { @ metal width in pad = 1.5um
  (INT L_M2_SI < 1.5 ABUT < 90 REGION) NOT INTERACT WBDMY
  (SIZE L_M2_SI BY 0.75 UNDEROVER )    NOT INTERACT WBDMY
  (INT L_M2_ST < 1.5 ABUT < 90 REGION) NOT INTERACT WBDMY 
  (SIZE L_M2_ST BY 0.75 UNDEROVER)     NOT INTERACT WBDMY 
  (INT L_M2_TR < 1.5 ABUT < 90 REGION) NOT INTERACT WBDMY
  (SIZE L_M2_TR BY 0.75 UNDEROVER )    NOT INTERACT WBDMY
}             
CBM3.W.2 { @ metal width in pad = 1.5um
  (INT L_M3_SI < 1.5 ABUT < 90 REGION) NOT INTERACT WBDMY
  (SIZE L_M3_SI BY 0.75 UNDEROVER )    NOT INTERACT WBDMY
  (INT L_M3_ST < 1.5 ABUT < 90 REGION) NOT INTERACT WBDMY 
  (SIZE L_M3_ST BY 0.75 UNDEROVER)     NOT INTERACT WBDMY 
  (INT L_M3_TR < 1.5 ABUT < 90 REGION) NOT INTERACT WBDMY
  (SIZE L_M3_TR BY 0.75 UNDEROVER )    NOT INTERACT WBDMY
}             
CBM4.W.2 { @ metal width in pad = 1.5um
  (INT L_M4_SI < 1.5 ABUT < 90 REGION) NOT INTERACT WBDMY
  (SIZE L_M4_SI BY 0.75 UNDEROVER )    NOT INTERACT WBDMY
  (INT L_M4_ST < 1.5 ABUT < 90 REGION) NOT INTERACT WBDMY 
  (SIZE L_M4_ST BY 0.75 UNDEROVER)     NOT INTERACT WBDMY 
  (INT L_M4_TR < 1.5 ABUT < 90 REGION) NOT INTERACT WBDMY
  (SIZE L_M4_TR BY 0.75 UNDEROVER )    NOT INTERACT WBDMY
}             
CBM5.W.2 { @ metal width in pad = 1.5um
  (INT L_M5_SI < 1.5 ABUT < 90 REGION) NOT INTERACT WBDMY
  (SIZE L_M5_SI BY 0.75 UNDEROVER )    NOT INTERACT WBDMY
  (INT L_M5_ST < 1.5 ABUT < 90 REGION) NOT INTERACT WBDMY 
  (SIZE L_M5_ST BY 0.75 UNDEROVER)     NOT INTERACT WBDMY 
  (INT L_M5_TR < 1.5 ABUT < 90 REGION) NOT INTERACT WBDMY
  (SIZE L_M5_TR BY 0.75 UNDEROVER )    NOT INTERACT WBDMY
}             
CBM6.W.2 { @ metal width in pad = 1.5um
  (INT L_M6_SI < 1.5 ABUT < 90 REGION) NOT INTERACT WBDMY
  (SIZE L_M6_SI BY 0.75 UNDEROVER )    NOT INTERACT WBDMY
  (INT L_M6_ST < 1.5 ABUT < 90 REGION) NOT INTERACT WBDMY 
  (SIZE L_M6_ST BY 0.75 UNDEROVER)     NOT INTERACT WBDMY 
  (INT L_M6_TR < 1.5 ABUT < 90 REGION) NOT INTERACT WBDMY
  (SIZE L_M6_TR BY 0.75 UNDEROVER )    NOT INTERACT WBDMY
}             

CBM1.W.3 { @ pad metal ring width = 5.0um
   INT R_M1_SI < 5 ABUT < 90 REGION
   J1_SI = SIZE PADM1area_SI BY 0.5
   L1_SI = M1 AND J1_SI
   K1_SI = PADH1_SI OR L1_SI
   A1_SI = ENC [PADH1_SI] K1_SI == 5
   B1_SI = PADH1_SI NOT COIN EDGE A1_SI
   //D1_SI = LENGTH B1_SI >20
   D1_SI = PADH1_SI TOUCH EDGE B1_SI 
   C1_SI = EXPAND EDGE D1_SI OUTSIDE BY 5.0
   E1_SI = K1_SI ENCLOSE C1_SI >1
   E1_SI AND C1_SI
   INT R_M1_ST < 5 ABUT < 90 REGION
   J1_ST = SIZE PADM1area_ST BY 0.5
   L1_ST = M1 AND J1_ST
   K1_ST = PADH1_ST OR L1_ST
   A1_ST = ENC [PADH1_ST] K1_ST == 5
   B1_ST = PADH1_ST NOT COIN EDGE A1_ST
   //D1_ST = LENGTH B1_ST >20
   D1_ST = PADH1_ST TOUCH EDGE B1_ST 
   C1_ST = EXPAND EDGE D1_ST OUTSIDE BY 5.0
   E1_ST = K1_ST ENCLOSE C1_ST >1
   E1_ST AND C1_ST
   INT R_M1_TR < 5 ABUT < 90 REGION
   J1_TR = SIZE PADM1area_TR BY 0.5
   L1_TR = M1 AND J1_TR
   K1_TR = PADH1_TR OR L1_TR
   A1_TR = ENC [PADH1_TR] K1_TR == 5
   B1_TR = PADH1_TR NOT COIN EDGE A1_TR
   //D1_TR = LENGTH B1_TR >20
   D1_TR = PADH1_TR TOUCH EDGE B1_TR 
   C1_TR = EXPAND EDGE D1_TR OUTSIDE BY 5.0
   E1_TR = K1_TR ENCLOSE C1_TR >1
   E1_TR AND C1_TR
}
CBM2.W.3 { @ pad metal ring width = 5.0um
   INT R_M2_SI < 5 ABUT < 90 REGION
   J2_SI = SIZE PADM2area_SI BY 0.5
   L2_SI = M2 AND J2_SI
   K2_SI = PADH2_SI OR L2_SI
   A2_SI = ENC [PADH2_SI] K2_SI == 5
   B2_SI = PADH2_SI NOT COIN EDGE A2_SI
   //D2_SI = LENGTH B2_SI >20
   D2_SI = PADH2_SI TOUCH EDGE B2_SI 
   C2_SI = EXPAND EDGE D2_SI OUTSIDE BY 5.0
   E2_SI = K2_SI ENCLOSE C2_SI >1
   E2_SI AND C2_SI
   INT R_M2_ST < 5 ABUT < 90 REGION
   J2_ST = SIZE PADM2area_ST BY 0.5
   L2_ST = M2 AND J2_ST
   K2_ST = PADH2_ST OR L2_ST
   A2_ST = ENC [PADH2_ST] K2_ST == 5
   B2_ST = PADH2_ST NOT COIN EDGE A2_ST
   //D2_ST = LENGTH B2_ST >20
   D2_ST = PADH2_ST TOUCH EDGE B2_ST 
   C2_ST = EXPAND EDGE D2_ST OUTSIDE BY 5.0
   E2_ST = K2_ST ENCLOSE C2_ST >1
   E2_ST AND C2_ST
   INT R_M2_TR < 5 ABUT < 90 REGION
   J2_TR = SIZE PADM2area_TR BY 0.5
   L2_TR = M2 AND J2_TR
   K2_TR = PADH2_TR OR L2_TR
   A2_TR = ENC [PADH2_TR] K2_TR == 5
   B2_TR = PADH2_TR NOT COIN EDGE A2_TR
   //D2_TR = LENGTH B2_TR >20
   D2_TR = PADH2_TR TOUCH EDGE B2_TR 
   C2_TR = EXPAND EDGE D2_TR OUTSIDE BY 5.0
   E2_TR = K2_TR ENCLOSE C2_TR >1
   E2_TR AND C2_TR
}
CBM3.W.3 { @ pad metal ring width = 5.0um
   INT R_M3_SI < 5 ABUT < 90 REGION
   J3_SI = SIZE PADM3area_SI BY 0.5
   L3_SI = M3 AND J3_SI
   K3_SI = PADH3_SI OR L3_SI
   A3_SI = ENC [PADH3_SI] K3_SI == 5
   B3_SI = PADH3_SI NOT COIN EDGE A3_SI
   //D3_SI = LENGTH B3_SI >20
   D3_SI = PADH3_SI TOUCH EDGE B3_SI 
   C3_SI = EXPAND EDGE D3_SI OUTSIDE BY 5.0
   E3_SI = K3_SI ENCLOSE C3_SI >1
   E3_SI AND C3_SI
   INT R_M3_ST < 5 ABUT < 90 REGION
   J3_ST = SIZE PADM3area_ST BY 0.5
   L3_ST = M3 AND J3_ST
   K3_ST = PADH3_ST OR L3_ST
   A3_ST = ENC [PADH3_ST] K3_ST == 5
   B3_ST = PADH3_ST NOT COIN EDGE A3_ST
   //D3_ST = LENGTH B3_ST >20
   D3_ST = PADH3_ST TOUCH EDGE B3_ST 
   C3_ST = EXPAND EDGE D3_ST OUTSIDE BY 5.0
   E3_ST = K3_ST ENCLOSE C3_ST >1
   E3_ST AND C3_ST
   INT R_M3_TR < 5 ABUT < 90 REGION
   J3_TR = SIZE PADM3area_TR BY 0.5
   L3_TR = M3 AND J3_TR
   K3_TR = PADH3_TR OR L3_TR
   A3_TR = ENC [PADH3_TR] K3_TR == 5
   B3_TR = PADH3_TR NOT COIN EDGE A3_TR
   //D3_TR = LENGTH B3_TR >20
   D3_TR = PADH3_TR TOUCH EDGE B3_TR 
   C3_TR = EXPAND EDGE D3_TR OUTSIDE BY 5.0
   E3_TR = K3_TR ENCLOSE C3_TR >1
   E3_TR AND C3_TR
}
CBM4.W.3 { @ pad metal ring width = 5.0um
   INT R_M4_SI < 5 ABUT < 90 REGION
   J4_SI = SIZE PADM4area_SI BY 0.5
   L4_SI = M4 AND J4_SI
   K4_SI = PADH4_SI OR L4_SI
   A4_SI = ENC [PADH4_SI] K4_SI == 5
   B4_SI = PADH4_SI NOT COIN EDGE A4_SI
   //D4_SI = LENGTH B4_SI >20
   D4_SI = PADH4_SI TOUCH EDGE B4_SI 
   C4_SI = EXPAND EDGE D4_SI OUTSIDE BY 5.0
   E4_SI = K4_SI ENCLOSE C4_SI >1
   E4_SI AND C4_SI
   INT R_M4_ST < 5 ABUT < 90 REGION
   J4_ST = SIZE PADM4area_ST BY 0.5
   L4_ST = M4 AND J4_ST
   K4_ST = PADH4_ST OR L4_ST
   A4_ST = ENC [PADH4_ST] K4_ST == 5
   B4_ST = PADH4_ST NOT COIN EDGE A4_ST
   //D4_ST = LENGTH B4_ST >20
   D4_ST = PADH4_ST TOUCH EDGE B4_ST 
   C4_ST = EXPAND EDGE D4_ST OUTSIDE BY 5.0
   E4_ST = K4_ST ENCLOSE C4_ST >1
   E4_ST AND C4_ST
   INT R_M4_TR < 5 ABUT < 90 REGION
   J4_TR = SIZE PADM4area_TR BY 0.5
   L4_TR = M4 AND J4_TR
   K4_TR = PADH4_TR OR L4_TR
   A4_TR = ENC [PADH4_TR] K4_TR == 5
   B4_TR = PADH4_TR NOT COIN EDGE A4_TR
   //D4_TR = LENGTH B4_TR >20
   D4_TR = PADH4_TR TOUCH EDGE B4_TR 
   C4_TR = EXPAND EDGE D4_TR OUTSIDE BY 5.0
   E4_TR = K4_TR ENCLOSE C4_TR >1
   E4_TR AND C4_TR
}
CBM5.W.3 { @ pad metal ring width = 5.0um
   INT R_M5_SI < 5 ABUT < 90 REGION
   J5_SI = SIZE PADM5area_SI BY 0.5
   L5_SI = M5 AND J5_SI
   K5_SI = PADH5_SI OR L5_SI
   A5_SI = ENC [PADH5_SI] K5_SI == 5
   B5_SI = PADH5_SI NOT COIN EDGE A5_SI
   //D5_SI = LENGTH B5_SI >20
   D5_SI = PADH5_SI TOUCH EDGE B5_SI 
   C5_SI = EXPAND EDGE D5_SI OUTSIDE BY 5.0
   E5_SI = K5_SI ENCLOSE C5_SI >1
   E5_SI AND C5_SI
   INT R_M5_ST < 5 ABUT < 90 REGION
   J5_ST = SIZE PADM5area_ST BY 0.5
   L5_ST = M5 AND J5_ST
   K5_ST = PADH5_ST OR L5_ST
   A5_ST = ENC [PADH5_ST] K5_ST == 5
   B5_ST = PADH5_ST NOT COIN EDGE A5_ST
   //D5_ST = LENGTH B5_ST >20
   D5_ST = PADH5_ST TOUCH EDGE B5_ST 
   C5_ST = EXPAND EDGE D5_ST OUTSIDE BY 5.0
   E5_ST = K5_ST ENCLOSE C5_ST >1
   E5_ST AND C5_ST
   INT R_M5_TR < 5 ABUT < 90 REGION
   J5_TR = SIZE PADM5area_TR BY 0.5
   L5_TR = M5 AND J5_TR
   K5_TR = PADH5_TR OR L5_TR
   A5_TR = ENC [PADH5_TR] K5_TR == 5
   B5_TR = PADH5_TR NOT COIN EDGE A5_TR
   //D5_TR = LENGTH B5_TR >20
   D5_TR = PADH5_TR TOUCH EDGE B5_TR 
   C5_TR = EXPAND EDGE D5_TR OUTSIDE BY 5.0
   E5_TR = K5_TR ENCLOSE C5_TR >1
   E5_TR AND C5_TR
}
CBM6.W.3 { @ pad metal ring width = 5.0um
   INT R_M6_SI < 5 ABUT < 90 REGION
   J6_SI = SIZE PADM6area_SI BY 0.5
   L6_SI = M6 AND J6_SI
   K6_SI = PADH6_SI OR L6_SI
   A6_SI = ENC [PADH6_SI] K6_SI == 5
   B6_SI = PADH6_SI NOT COIN EDGE A6_SI
   //D6_SI = LENGTH B6_SI >20
   D6_SI = PADH6_SI TOUCH EDGE B6_SI 
   C6_SI = EXPAND EDGE D6_SI OUTSIDE BY 5.0
   E6_SI = K6_SI ENCLOSE C6_SI >1
   E6_SI AND C6_SI
   INT R_M6_ST < 5 ABUT < 90 REGION
   J6_ST = SIZE PADM6area_ST BY 0.5
   L6_ST = M6 AND J6_ST
   K6_ST = PADH6_ST OR L6_ST
   A6_ST = ENC [PADH6_ST] K6_ST == 5
   B6_ST = PADH6_ST NOT COIN EDGE A6_ST
   //D6_ST = LENGTH B6_ST >20
   D6_ST = PADH6_ST TOUCH EDGE B6_ST 
   C6_ST = EXPAND EDGE D6_ST OUTSIDE BY 5.0
   E6_ST = K6_ST ENCLOSE C6_ST >1
   E6_ST AND C6_ST
   INT R_M6_TR < 5 ABUT < 90 REGION
   J6_TR = SIZE PADM6area_TR BY 0.5
   L6_TR = M6 AND J6_TR
   K6_TR = PADH6_TR OR L6_TR
   A6_TR = ENC [PADH6_TR] K6_TR == 5
   B6_TR = PADH6_TR NOT COIN EDGE A6_TR
   //D6_TR = LENGTH B6_TR >20
   D6_TR = PADH6_TR TOUCH EDGE B6_TR 
   C6_TR = EXPAND EDGE D6_TR OUTSIDE BY 5.0
   E6_TR = K6_TR ENCLOSE C6_TR >1
   E6_TR AND C6_TR
}


CBM1.S.2 { @ metal space in pad = 1.0um
  (EXT L_M1_SI < 1 ABUT < 90 REGION) NOT INTERACT WBDMY
  X_SI = SIZE SL_M1_SI BY 0.5 UNDEROVER
  (X_SI TOUCH L_M1_SI > 1 ) NOT INTERACT WBDMY
  (EXT L_M1_ST < 1 ABUT < 90 REGION) NOT INTERACT WBDMY
  X_ST = SIZE SL_M1_ST BY 0.5 UNDEROVER
  (X_ST TOUCH L_M1_ST > 1 ) NOT INTERACT WBDMY
  (EXT L_M1_TR < 1 ABUT < 90 REGION ) NOT INTERACT WBDMY 
  X_TR = SIZE SL_M1_TR BY 0.5 UNDEROVER
  (X_TR TOUCH L_M1_TR > 1 ) NOT INTERACT WBDMY
}           
CBM2.S.2 { @ metal space in pad = 1.0um
  (EXT L_M2_SI < 1 ABUT < 90 REGION) NOT INTERACT WBDMY
  X_SI = SIZE SL_M2_SI BY 0.5 UNDEROVER
  (X_SI TOUCH L_M2_SI > 1 ) NOT INTERACT WBDMY
  (EXT L_M2_ST < 1 ABUT < 90 REGION) NOT INTERACT WBDMY
  X_ST = SIZE SL_M2_ST BY 0.5 UNDEROVER
  (X_ST TOUCH L_M2_ST > 1 ) NOT INTERACT WBDMY
  (EXT L_M2_TR < 1 ABUT < 90 REGION ) NOT INTERACT WBDMY 
  X_TR = SIZE SL_M2_TR BY 0.5 UNDEROVER
  (X_TR TOUCH L_M2_TR > 1 ) NOT INTERACT WBDMY
}           
CBM3.S.2 { @ metal space in pad = 1.0um
  (EXT L_M3_SI < 1 ABUT < 90 REGION) NOT INTERACT WBDMY
  X_SI = SIZE SL_M3_SI BY 0.5 UNDEROVER
  (X_SI TOUCH L_M3_SI > 1 ) NOT INTERACT WBDMY
  (EXT L_M3_ST < 1 ABUT < 90 REGION) NOT INTERACT WBDMY
  X_ST = SIZE SL_M3_ST BY 0.5 UNDEROVER
  (X_ST TOUCH L_M3_ST > 1 ) NOT INTERACT WBDMY
  (EXT L_M3_TR < 1 ABUT < 90 REGION ) NOT INTERACT WBDMY 
  X_TR = SIZE SL_M3_TR BY 0.5 UNDEROVER
  (X_TR TOUCH L_M3_TR > 1 ) NOT INTERACT WBDMY
}           
CBM4.S.2 { @ metal space in pad = 1.0um
  (EXT L_M4_SI < 1 ABUT < 90 REGION) NOT INTERACT WBDMY
  X_SI = SIZE SL_M4_SI BY 0.5 UNDEROVER
  (X_SI TOUCH L_M4_SI > 1 ) NOT INTERACT WBDMY
  (EXT L_M4_ST < 1 ABUT < 90 REGION) NOT INTERACT WBDMY
  X_ST = SIZE SL_M4_ST BY 0.5 UNDEROVER
  (X_ST TOUCH L_M4_ST > 1 ) NOT INTERACT WBDMY
  (EXT L_M4_TR < 1 ABUT < 90 REGION ) NOT INTERACT WBDMY 
  X_TR = SIZE SL_M4_TR BY 0.5 UNDEROVER
  (X_TR TOUCH L_M4_TR > 1 ) NOT INTERACT WBDMY
}           
CBM5.S.2 { @ metal space in pad = 1.0um
  (EXT L_M5_SI < 1 ABUT < 90 REGION) NOT INTERACT WBDMY
  X_SI = SIZE SL_M5_SI BY 0.5 UNDEROVER
  (X_SI TOUCH L_M5_SI > 1 ) NOT INTERACT WBDMY
  (EXT L_M5_ST < 1 ABUT < 90 REGION) NOT INTERACT WBDMY
  X_ST = SIZE SL_M5_ST BY 0.5 UNDEROVER
  (X_ST TOUCH L_M5_ST > 1 ) NOT INTERACT WBDMY
  (EXT L_M5_TR < 1 ABUT < 90 REGION ) NOT INTERACT WBDMY 
  X_TR = SIZE SL_M5_TR BY 0.5 UNDEROVER
  (X_TR TOUCH L_M5_TR > 1 ) NOT INTERACT WBDMY
}           
CBM6.S.2 { @ metal space in pad = 1.0um
  (EXT L_M6_SI < 1 ABUT < 90 REGION) NOT INTERACT WBDMY
  X_SI = SIZE SL_M6_SI BY 0.5 UNDEROVER
  (X_SI TOUCH L_M6_SI > 1 ) NOT INTERACT WBDMY
  (EXT L_M6_ST < 1 ABUT < 90 REGION) NOT INTERACT WBDMY
  X_ST = SIZE SL_M6_ST BY 0.5 UNDEROVER
  (X_ST TOUCH L_M6_ST > 1 ) NOT INTERACT WBDMY
  (EXT L_M6_TR < 1 ABUT < 90 REGION ) NOT INTERACT WBDMY 
  X_TR = SIZE SL_M6_TR BY 0.5 UNDEROVER
  (X_TR TOUCH L_M6_TR > 1 ) NOT INTERACT WBDMY
}           

CBM1.S.3 { @ space of pad ring metal to nearest metal 1~3.5um
  X_SI = SL_M1_SI TOUCH L_M1_SI > 1
  Y_SI = SL_M1_SI NOT X_SI
  ( INT Y_SI < 1 ABUT < 90 REGION ) NOT INTERACT WBDMY
  ( SIZE Y_SI BY 1.75 UNDEROVER )   NOT INTERACT WBDMY
  X_ST = SL_M1_ST TOUCH L_M1_ST > 1
  Y_ST = SL_M1_ST NOT X_ST
  (INT Y_ST < 1 ABUT < 90 REGION ) NOT INTERACT WBDMY
  (SIZE Y_ST BY 1.75 UNDEROVER   ) NOT INTERACT WBDMY
  X_TR = SL_M1_TR TOUCH L_M1_TR > 1
  Y_TR = SL_M1_TR NOT X_TR
  ( INT Y_TR < 1 ABUT < 90 REGION )NOT INTERACT WBDMY
  ( SIZE Y_TR BY 1.75 UNDEROVER  ) NOT INTERACT WBDMY
}  
CBM2.S.3 { @ space of pad ring metal to nearest metal 1~3.5um
  X_SI = SL_M2_SI TOUCH L_M2_SI > 1
  Y_SI = SL_M2_SI NOT X_SI
  ( INT Y_SI < 1 ABUT < 90 REGION ) NOT INTERACT WBDMY
  ( SIZE Y_SI BY 1.75 UNDEROVER )   NOT INTERACT WBDMY
  X_ST = SL_M2_ST TOUCH L_M2_ST > 1
  Y_ST = SL_M2_ST NOT X_ST
  (INT Y_ST < 1 ABUT < 90 REGION ) NOT INTERACT WBDMY
  (SIZE Y_ST BY 1.75 UNDEROVER   ) NOT INTERACT WBDMY
  X_TR = SL_M2_TR TOUCH L_M2_TR > 1
  Y_TR = SL_M2_TR NOT X_TR
  ( INT Y_TR < 1 ABUT < 90 REGION )NOT INTERACT WBDMY
  ( SIZE Y_TR BY 1.75 UNDEROVER  ) NOT INTERACT WBDMY
}  
CBM3.S.3 { @ space of pad ring metal to nearest metal 1~3.5um
  X_SI = SL_M3_SI TOUCH L_M3_SI > 1
  Y_SI = SL_M3_SI NOT X_SI
  ( INT Y_SI < 1 ABUT < 90 REGION ) NOT INTERACT WBDMY
  ( SIZE Y_SI BY 1.75 UNDEROVER )   NOT INTERACT WBDMY
  X_ST = SL_M3_ST TOUCH L_M3_ST > 1
  Y_ST = SL_M3_ST NOT X_ST
  (INT Y_ST < 1 ABUT < 90 REGION ) NOT INTERACT WBDMY
  (SIZE Y_ST BY 1.75 UNDEROVER   ) NOT INTERACT WBDMY
  X_TR = SL_M3_TR TOUCH L_M3_TR > 1
  Y_TR = SL_M3_TR NOT X_TR
  ( INT Y_TR < 1 ABUT < 90 REGION )NOT INTERACT WBDMY
  ( SIZE Y_TR BY 1.75 UNDEROVER  ) NOT INTERACT WBDMY
}  
CBM4.S.3 { @ space of pad ring metal to nearest metal 1~3.5um
  X_SI = SL_M4_SI TOUCH L_M4_SI > 1
  Y_SI = SL_M4_SI NOT X_SI
  ( INT Y_SI < 1 ABUT < 90 REGION ) NOT INTERACT WBDMY
  ( SIZE Y_SI BY 1.75 UNDEROVER )   NOT INTERACT WBDMY
  X_ST = SL_M4_ST TOUCH L_M4_ST > 1
  Y_ST = SL_M4_ST NOT X_ST
  (INT Y_ST < 1 ABUT < 90 REGION ) NOT INTERACT WBDMY
  (SIZE Y_ST BY 1.75 UNDEROVER   ) NOT INTERACT WBDMY
  X_TR = SL_M4_TR TOUCH L_M4_TR > 1
  Y_TR = SL_M4_TR NOT X_TR
  ( INT Y_TR < 1 ABUT < 90 REGION )NOT INTERACT WBDMY
  ( SIZE Y_TR BY 1.75 UNDEROVER  ) NOT INTERACT WBDMY
}  
CBM5.S.3 { @ space of pad ring metal to nearest metal 1~3.5um
  X_SI = SL_M5_SI TOUCH L_M5_SI > 1
  Y_SI = SL_M5_SI NOT X_SI
  ( INT Y_SI < 1 ABUT < 90 REGION ) NOT INTERACT WBDMY
  ( SIZE Y_SI BY 1.75 UNDEROVER )   NOT INTERACT WBDMY
  X_ST = SL_M5_ST TOUCH L_M5_ST > 1
  Y_ST = SL_M5_ST NOT X_ST
  (INT Y_ST < 1 ABUT < 90 REGION ) NOT INTERACT WBDMY
  (SIZE Y_ST BY 1.75 UNDEROVER   ) NOT INTERACT WBDMY
  X_TR = SL_M5_TR TOUCH L_M5_TR > 1
  Y_TR = SL_M5_TR NOT X_TR
  ( INT Y_TR < 1 ABUT < 90 REGION )NOT INTERACT WBDMY
  ( SIZE Y_TR BY 1.75 UNDEROVER  ) NOT INTERACT WBDMY
}  
CBM6.S.3 { @ space of pad ring metal to nearest metal 1~3.5um
  X_SI = SL_M6_SI TOUCH L_M6_SI > 1
  Y_SI = SL_M6_SI NOT X_SI
  ( INT Y_SI < 1 ABUT < 90 REGION ) NOT INTERACT WBDMY
  ( SIZE Y_SI BY 1.75 UNDEROVER )   NOT INTERACT WBDMY
  X_ST = SL_M6_ST TOUCH L_M6_ST > 1
  Y_ST = SL_M6_ST NOT X_ST
  (INT Y_ST < 1 ABUT < 90 REGION ) NOT INTERACT WBDMY
  (SIZE Y_ST BY 1.75 UNDEROVER   ) NOT INTERACT WBDMY
  X_TR = SL_M6_TR TOUCH L_M6_TR > 1
  Y_TR = SL_M6_TR NOT X_TR
  ( INT Y_TR < 1 ABUT < 90 REGION )NOT INTERACT WBDMY
  ( SIZE Y_TR BY 1.75 UNDEROVER  ) NOT INTERACT WBDMY
}  






// Cu Pad Structure Rule
//======================
// CUP PAD 
VARIABLE CUPCB_EN_6 1.5

#IFDEF with_AP
CUPCB.EN.6.AP { @ CB enclosure by AP-MD >= ^CUPCB_EN_6 um
  ENC CB_CUP WBAP < CUPCB_EN_6 ABUT <90 SINGULAR REGION
  CB_CUP OUTSIDE EDGE WBAP
}
#ENDIF


CUPCB.EN.6.M6 { @ CB enclosure by Mtop-1 >=  ^CUPCB_EN_6 um
  ENC CB_CUP WBM6 < CUPCB_EN_6 ABUT <90 SINGULAR REGION
  CB_CUP OUTSIDE EDGE WBM6
}

CUPCB.EN.6.M7 { @ CB enclosure by MT >= ^CUPCB_EN_6 um
  ENC CB_CUP WBM7 < CUPCB_EN_6 ABUT <90 SINGULAR REGION
  CB_CUP OUTSIDE EDGE WBM7
}

CUPCB.EN.7.M6 { @ WBDMY enclosure of Mtop-1 (Mtop) metal pad =  0 um
  WBDMY OUTSIDE EDGE M6
  WBDMY INSIDE EDGE CB    
  WBDMY NOT INTERACT CB
  VERTEX WBDMY != 8
  w45_edge = ANGLE WBDMY  == 45
  WBDMY WITH EDGE w45_edge   > 4
  WBDMY WITH EDGE w45_edge   < 4
  LENGTH w45_edge      < 2
  LENGTH w45_edge      > 3
  m45_edge = M6 TOUCH INSIDE EDGE w45_edge
  m45_edge NOT COIN EDGE w45_edge
  w45_edge NOT COIN EDGE m45_edge
}
CUPCB.EN.7.M7 { @ WBDMY enclosure of Mtop-1 (Mtop) metal pad =  0 um
  WBDMY OUTSIDE EDGE M7
  WBDMY INSIDE EDGE CB    
  WBDMY NOT INTERACT CB
  VERTEX WBDMY != 8
  w45_edge = ANGLE WBDMY  == 45
  WBDMY WITH EDGE w45_edge   > 4
  WBDMY WITH EDGE w45_edge   < 4
  LENGTH w45_edge      < 2
  LENGTH w45_edge      > 3
  m45_edge = M7 TOUCH INSIDE EDGE w45_edge
  m45_edge NOT COIN EDGE w45_edge
  w45_edge NOT COIN EDGE m45_edge
}


CUPCB.R.7 { @  Pad structure must be MT/VIAT/Mtop-1. MT/Mtop-1 must be solid.  
@ For AP-MD process, Al pad is required to be be drawn.    
  CB_CUP NOT WBM7  
  CB_CUP NOT ENCLOSE WBVIA6
  CB_CUP NOT WBM6
#IFDEF with_AP
  CB_CUP NOT AP
#ENDIF  
}

CUPCB.R.9.CB {@ length of octangle pad CB 45 degree turn corners 2~3um
  VERTEX CB_CUP != 8
  s45_edge = ANGLE CB_CUP  == 45  
  LENGTH s45_edge      < 2
  LENGTH s45_edge      > 3
}

CUPCB.R.9.M7 { @ length of octangle pad MT 45 degree turn corners  2~3um
  VERTEX WBM7	     != 8
  s45_edgeM7   = ANGLE WBM7  == 45
  LENGTH s45_edgeM7   < 2
  LENGTH s45_edgeM7   > 3
}
CUPCB.R.9.M6 { @ length of octangle Mtop-1 signal dsipersion pad 45 degree turn corners  2~3um
  VERTEX WBM6       != 8
  s45_edgeM6  = ANGLE WBM6 == 45
  LENGTH s45_edgeM6  < 2
  LENGTH s45_edgeM6  > 3
}

#IFDEF with_AP
CUPCB.R.9.AP { @ length of octangle pad AP-MD 45 degree turn corners  2~3um
  VERTEX WBAP	     != 8
  s45_edgeAP   = ANGLE WBAP  == 45
  LENGTH s45_edgeAP   < 2
  LENGTH s45_edgeAP   > 3
}
#ENDIF


// CUP Pad Structure Rules start here
VARIABLE CBVIAT_W_1  0.36
VARIABLE CBVIAT_S_1  0.54
VARIABLE CBVIAT_EN_1 0.09
VARIABLE CBVIAT_DN_1  0.1 
VARIABLE CBVIAT_DN_2  0.1 

CUPVIAT.W.1 { @ VIAT width == ^CBVIAT_W_1 um
  NOT RECTANGLE WBVIA6 == CBVIAT_W_1 BY == CBVIAT_W_1 ORTHOGONAL ONLY
}
CUPVIAT.S.1 { @ VIAT space == ^CBVIAT_S_1 um
  EXT WBVIA6 < CBVIAT_S_1 ABUT <90 SINGULAR REGION
}
CUPVIAT.EN.1.M7 { @ VIAT enclosure by MT >= ^CBVIAT_EN_1 um 
  ENC WBVIA6 WBM7 < CBVIAT_EN_1 ABUT <90 SINGULAR REGION
  WBVIA6 NOT WBM7
}
CUPVIAT.EN.1.M6 { @ VIAT enclosure by Mtop-1 >= CBVIAT_EN_1 um 
  ENC WBVIA6 WBM6 < CBVIAT_EN_1 ABUT <90 SINGULAR REGION
  WBVIA6 NOT WBM6
}

CONNECT WBVIA6 CB_CUP
CUPVIAT.DN.1 { @ Ratio of total exposure VIAT area to CB area within CB region >=  ^CBVIAT_DN_1 
   NET AREA RATIO CB_CUP WBVIA6 <  CBVIAT_DN_1
  	[AREA(WBVIA6)/AREA(CB_CUP)] RDB CUPVIAT.DN.1.ratio CB_CUP WBVIA6
}
CUPVIAT.DN.2 { @ Minimum via density over any 10x10um area (checked by stepping in 5um increment) >= ^CBVIAT_DN_2
  DENSITY WBVIA6 < CBVIAT_DN_2 INSIDE OF LAYER CB_CUP WINDOW 10 STEP 5 BACKUP PRINT CUPVIAT.DN.2.density 
}


// Polyimide Window Rule
//======================
PM_CB   = PM INTERACT CBx	 	
PM_NOT_CB = ((PM NOT INTERACT CBx) NOT INTERACT UBM) NOT INTERACT SR_EDGE
PM.W.1 { @ PM width (Interact with CB region) >= 86um
  INT PM_CB < 86 ABUT < 90 SINGULAR REGION
}
PM.W.2 { @ PM width (Not interact with CB region) >= 30um
  INT PM_NOT_CB < 30 ABUT <90 SINGULAR REGION
}

PM.S.1 { @ Space or Space to chip edge >= 15 um
   EXT PM < 15 ABUT < 90 SINGULAR REGION
   ENC PM CHIP_EDGE < 15 ABUT >0 < 90 SINGULAR REGION
}

PM.EN.1 {@ PM enclosure of CB >= 5um
  ENC CBx PM_CB < 5 ABUT <90 SINGULAR REGION
}
CHIP_PM = CHIP INTERACT PM
PM.R.3 { @ Polyimide is not allowed over seal ring area
  (SR_EDGE NOT PM) INTERACT CHIP_PM
}
//PM.R.1 can't be checked by DRC.
//PM.R.2 can't be checked by DRC.

#IFDEF with_AP

// RV Rules 
//==============================================

VARIABLE RV_W_1     3
VARIABLE RV_S_1     3
VARIABLE RV_S_3     6
VARIABLE RV_EN_1    1.5
VARIABLE AP_W_1     3
VARIABLE AP_W_2     35.0
VARIABLE AP_S_1     2
VARIABLE AP_S_1_1   2.5

VARIABLE AP_S_2     5
VARIABLE AP_S_3     5
VARIABLE AP_S_4     3.5
VARIABLE AP_EN_1    1.5
VARIABLE AP_EN_2    1.5
VARIABLE AP_DN_1_L  0.1
VARIABLE AP_DN_1_H  0.7


RV_CHECK = RV NOT INSIDE SRCSR

RV.W.1 { @ Width (maximum = minimum) (Not inside seal ring) == ^RV_W_1 um
  NOT RECTANGLE RV_CHECK == RV_W_1 BY == RV_W_1 ORTHOGONAL ONLY
}

RV.S.1 { @ Space >= ^RV_S_1 um
  EXT RV < RV_S_1 ABUT < 90 SINGULAR REGION
}

RV.S.3 { @ Space to CB/CB2/FW {Overlap is not allowed} >= ^RV_S_3 um
   EXT RV_CHECK CBx  < RV_S_3 ABUT < 90 SINGULAR REGION 
   RV_CHECK AND CBx
   EXT RV_CHECK CB2x  < RV_S_3 ABUT < 90 SINGULAR REGION 
   RV_CHECK AND CB2x  
   EXT RV_CHECK FW < RV_S_3 ABUT < 90 SINGULAR REGION 
   RV_CHECK AND FW
}

RV.EN.1 {@ Enclosure by Mtop (Not inside seal ring) >= ^RV_EN_1 um
  ENC RV_CHECK M7 < RV_EN_1 ABUT < 90 SINGULAR REGION
  RV_CHECK NOT M7
}


RV.R.1 { @ A 45-degree rotated RV is not allowed (Not inside seal ring)
  ANGLE RV_CHECK >0 <90
}

RV.R.2 { @ For AP-MD process, {CB inside CB2} enclosure by CB2 = 0 (CB and CB2 must draw same size, and identical shape). 
   CBx XOR (CB2x NOT UBM) 
}

// AP-MD layout Rules
//=====================================


AP_CHECK = AP NOT INSIDE SRCSR

AP.W.1 { @ Width [interconnect only] [ not inside FW_AP or sealring] >= ^AP_W_1 um
   A = AP_CHECK NOT FW_AP 
   INT A < AP_W_1 ABUT < 90 SINGULAR REGION
}

AP.W.2 { @ Maximum width [interconnect only] [ not inside UBM, CB or CB2] <= ^AP_W_2 um
   A = ((AP NOT UBM) NOT CB) NOT CB2
   WITH WIDTH A > AP_W_2
}

AP.S.1 { @ Space >= ^AP_S_1 um
   EXT AP < AP_S_1 ABUT < 90 SINGULAR REGION
}

AP.S.1.1 {@ AP pad space to AP pad or AP routing >= ^AP_S_1_1 um
  AP_pad = SIZE CB2x BY 3 INSIDE OF AP STEP AP_S_1*0.7 
  X = AP COIN INSIDE EDGE AP_pad   
  EXT X < AP_S_1_1 ABUT < 90 SPACE REGION  
  EXT X AP < AP_S_1_1 ABUT < 90 REGION 
}

AP.S.2 { @ Space to FW_CU/FW_AP [(overlap FW_CU)/(Cut FW_AP) is prohibited] >= ^AP_S_2 um
   EXT AP FW < AP_S_2 ABUT < 90 SINGULAR REGION
   AP AND FW_Cu
   AP CUT FW_AP
}

AP.S.3 { @ Space to LMARK [overlap is prohibited, except seal-ring] >= ^AP_S_3 um
  EXT AP_CHECK LMARK < AP_S_3 ABUT < 90 SINGULAR REGION
  AP_CHECK AND LMARK
}

AP.S.4 { @ Space to CB2/PM [overlap is prohibited except bond pad, UBM, and seal ring] >= ^AP_S_4 um  
  CB2_CHECK = (CB2 NOT UBM) NOT CB
  EXT AP_CHECK CB2_CHECK < AP_S_4 ABUT < 90 SINGULAR REGION 
  AP_CHECK AND CB2_CHECK
  PM_CHECK =  (PM NOT UBM) NOT CB
  EXT AP_CHECK PM_CHECK  < AP_S_4 ABUT < 90 SINGULAR REGION 
  AP_CHECK AND PM_CHECK
}

AP.EN.1 { @ Enclosured of RV (Not inside seal ring) >= ^AP_EN_1 um
  ENC RV_CHECK AP_CHECK < AP_EN_1 ABUT < 90 SINGULAR REGION
  RV_CHECK NOT AP_CHECK 
}

AP.EN.2 { @ Enclosure of CB/CB2 >= ^AP_EN_2 um ; AP must be drawn to cover PAD for AP_RDL
  ENC CBx AP < AP_EN_2 ABUT < 90 SINGULAR REGION
  CBx NOT AP
  ENC CB2x AP < AP_EN_2 ABUT < 90 SINGULAR REGION
  CB2x NOT AP
}

AP.DN.1.L { @ AP density across full chip >= ^AP_DN_1_L
  DENSITY AP < AP_DN_1_L INSIDE OF LAYER CHIP_EDGE PRINT AP.DN.1L.density
}

AP.DN.1.H { @ AP density across full chip <= ^AP_DN_1_H
  DENSITY AP > AP_DN_1_H INSIDE OF LAYER CHIP_EDGE PRINT AP.DN.1H.density    
}


#ENDIF

